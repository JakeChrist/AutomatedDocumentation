<!-- Generated by DocGen-LM -->
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>test_parser_cpp</title>
<link href="static/style.css" rel="stylesheet"/>
</head>
<body><a class="skip-link" href="#main-content">Skip to main content</a><header class="topbar"><button aria-label="Toggle navigation menu" id="sidebar-toggle">Menu</button><span class="topbar-title">test_parser_cpp</span></header>
<nav aria-label="Documentation navigation" class="sidebar">
<h2>Navigation</h2>
<ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><a href="cache.html">cache</a></li><li><a href="chunk_utils.html">chunk_utils</a></li><li><a href="docgenerator.html">docgenerator</a></li><li><a href="explaincode.html">explaincode</a></li><li><a href="gui_wrapper.html">gui_wrapper</a></li><li><a href="html_writer.html">html_writer</a></li><li><a href="llm_client.html">llm_client</a></li><li><a href="manual_utils.html">manual_utils</a></li><li><a href="parser_cpp.html">parser_cpp</a></li><li><a href="parser_java.html">parser_java</a></li><li><a href="parser_matlab.html">parser_matlab</a></li><li><a href="parser_python.html">parser_python</a></li><li><a href="retrofit_sidebar.html">retrofit_sidebar</a></li><li><a href="reviewer.html">reviewer</a></li><li><a href="sanitize_docs.html">sanitize_docs</a></li><li><a href="scanner.html">scanner</a></li><li><a href="setup.html">setup</a></li><li><a href="summarize_utils.html">summarize_utils</a></li><li><details><summary>tests</summary><ul><li><a href="test_cache.html">test_cache</a></li><li><a href="test_chunk_utils.html">test_chunk_utils</a></li><li><a href="test_docgenerator.html">test_docgenerator</a></li><li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li><li><a href="test_explaincode.html">test_explaincode</a></li><li><a href="test_html_writer.html">test_html_writer</a></li><li><a href="test_integration.html">test_integration</a></li><li><a href="test_llm_client.html">test_llm_client</a></li><li><a href="test_manual_utils.html">test_manual_utils</a></li><li><a href="test_parser_cpp.html">test_parser_cpp</a></li><li><a href="test_parser_java.html">test_parser_java</a></li><li><a href="test_parser_matlab.html">test_parser_matlab</a></li><li><a href="test_parser_python.html">test_parser_python</a></li><li><a href="test_resume_progress.html">test_resume_progress</a></li><li><a href="test_retrofit_sidebar.html">test_retrofit_sidebar</a></li><li><a href="test_reviewer.html">test_reviewer</a></li><li><a href="test_sanitize_docs.html">test_sanitize_docs</a></li><li><a href="test_scanner.html">test_scanner</a></li></ul></details></li></ul>
</nav>
<main class="content" id="main-content" role="main">
<h1>test_parser_cpp</h1>
<p>Test function that validates parsing of C++ source code containing a namespace, function, and class with documentation comments. The test creates a temporary C++ file with documented code elements, parses it using `parse_cpp_file`, and verifies that the parsed output correctly extracts module documentation, namespace name, function details including name, docstring, and source code, and class details including name, docstring, member variables, and methods with their respective documentation and source code.</p>
<h2>Functions</h2>
<h3 id="test_parse_cpp">test_parse_cpp(tmp_path: Path) -&gt; None</h3>
<p>The function `test_parse_cpp` tests the parsing of a C++ source file by verifying that the `parse_cpp_file` function correctly extracts documentation strings, function details, class information, and member variables and methods. It creates a temporary C++ file with a namespace, function, and class containing docstrings, then asserts that the parsed output matches expected values for module comments, namespace, functions, classes, variables, and methods. The test checks for correct extraction of names, docstrings, and source code snippets from the parsed C++ file.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_parse_cpp</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    src <span style="color: #666666">=</span> textwrap<span style="color: #666666">.</span>dedent(
<span style="color: #bbbbbb">        </span><span style="color: #BA2121; font-style: italic">"""</span>
<span style="color: #BA2121; font-style: italic">        /** Module comment */</span>
<span style="color: #BA2121; font-style: italic">        namespace demo {</span>

<span style="color: #BA2121; font-style: italic">        /** Adds numbers */</span>
<span style="color: #BA2121; font-style: italic">        int add(int a, int b) {</span>
<span style="color: #BA2121; font-style: italic">            return a + b;</span>
<span style="color: #BA2121; font-style: italic">        }</span>

<span style="color: #BA2121; font-style: italic">        /** Greeter class */</span>
<span style="color: #BA2121; font-style: italic">        class Greeter {</span>
<span style="color: #BA2121; font-style: italic">        public:</span>
<span style="color: #BA2121; font-style: italic">            /// name field</span>
<span style="color: #BA2121; font-style: italic">            std::string name;</span>

<span style="color: #BA2121; font-style: italic">            /// greet someone</span>
<span style="color: #BA2121; font-style: italic">            std::string greet(const std::string&amp; who) {</span>
<span style="color: #BA2121; font-style: italic">                return "Hi " + who;</span>
<span style="color: #BA2121; font-style: italic">            }</span>
<span style="color: #BA2121; font-style: italic">        };</span>
<span style="color: #BA2121; font-style: italic">        }</span>
<span style="color: #BA2121; font-style: italic">        """</span>
    )
    file <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">"sample.cpp"</span>
    file<span style="color: #666666">.</span>write_text(src)

    result <span style="color: #666666">=</span> parse_cpp_file(<span style="color: #008000">str</span>(file))
    <span style="color: #008000; font-weight: bold">assert</span> result[<span style="color: #BA2121">"module_docstring"</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">"Module comment"</span>
    <span style="color: #008000; font-weight: bold">assert</span> result<span style="color: #666666">.</span>get(<span style="color: #BA2121">"namespace"</span>) <span style="color: #666666">==</span> <span style="color: #BA2121">"demo"</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(result[<span style="color: #BA2121">"functions"</span>]) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
    func <span style="color: #666666">=</span> result[<span style="color: #BA2121">"functions"</span>][<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">assert</span> func[<span style="color: #BA2121">"name"</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">"add"</span>
    <span style="color: #008000; font-weight: bold">assert</span> func[<span style="color: #BA2121">"docstring"</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">"Adds numbers"</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">"return a + b;"</span> <span style="color: #AA22FF; font-weight: bold">in</span> func[<span style="color: #BA2121">"source"</span>]
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(result[<span style="color: #BA2121">"classes"</span>]) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
    <span style="color: #008000">cls</span> <span style="color: #666666">=</span> result[<span style="color: #BA2121">"classes"</span>][<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">cls</span>[<span style="color: #BA2121">"name"</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">"Greeter"</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">cls</span>[<span style="color: #BA2121">"docstring"</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">"Greeter class"</span>
    field <span style="color: #666666">=</span> <span style="color: #008000">cls</span>[<span style="color: #BA2121">"variables"</span>][<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">assert</span> field[<span style="color: #BA2121">"name"</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">"name"</span>
    <span style="color: #008000; font-weight: bold">assert</span> field[<span style="color: #BA2121">"docstring"</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">"name field"</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">"std::string name;"</span> <span style="color: #AA22FF; font-weight: bold">in</span> field[<span style="color: #BA2121">"source"</span>]
    method <span style="color: #666666">=</span> <span style="color: #008000">cls</span>[<span style="color: #BA2121">"methods"</span>][<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">assert</span> method[<span style="color: #BA2121">"name"</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">"greet"</span>
    <span style="color: #008000; font-weight: bold">assert</span> method[<span style="color: #BA2121">"docstring"</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">"greet someone"</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">"std::string greet"</span> <span style="color: #AA22FF; font-weight: bold">in</span> method[<span style="color: #BA2121">"source"</span>]
</code></pre>
</main>
<footer aria-label="Page footer" class="page-footer"><p>Generated documentation</p></footer><script src="static/toggle.js"></script>
</body>
</html>
