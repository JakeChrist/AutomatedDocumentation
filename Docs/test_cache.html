<!-- Generated by DocGen-LM -->
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
    
<title>test_cache</title>
<link href="static/style.css" rel="stylesheet"/>
</head>
<body class="doc-body">
<button aria-label="Toggle navigation menu" class="sidebar-toggle" id="sidebar-toggle">Menu</button>
<div aria-label="Documentation navigation" class="sidebar" role="navigation">
<h2>Navigation</h2>
<ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><a href="cache.html">cache</a></li><li><a href="chunk_utils.html">chunk_utils</a></li><li><a href="docgenerator.html">docgenerator</a></li><li><a href="explaincode.html">explaincode</a></li><li><a href="gui_wrapper.html">gui_wrapper</a></li><li><a href="html_writer.html">html_writer</a></li><li><a href="llm_client.html">llm_client</a></li><li><a href="manual_utils.html">manual_utils</a></li><li><a href="parser_cpp.html">parser_cpp</a></li><li><a href="parser_java.html">parser_java</a></li><li><a href="parser_matlab.html">parser_matlab</a></li><li><a href="parser_python.html">parser_python</a></li><li><a href="retrofit_sidebar.html">retrofit_sidebar</a></li><li><a href="reviewer.html">reviewer</a></li><li><a href="sanitize_docs.html">sanitize_docs</a></li><li><a href="scanner.html">scanner</a></li><li><a href="setup.html">setup</a></li><li><a href="summarize_utils.html">summarize_utils</a></li><li><details><summary>tests</summary><ul><li><a href="test_cache.html">test_cache</a></li><li><a href="test_chunk_utils.html">test_chunk_utils</a></li><li><a href="test_docgenerator.html">test_docgenerator</a></li><li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li><li><a href="test_explaincode.html">test_explaincode</a></li><li><a href="test_html_writer.html">test_html_writer</a></li><li><a href="test_integration.html">test_integration</a></li><li><a href="test_llm_client.html">test_llm_client</a></li><li><a href="test_manual_utils.html">test_manual_utils</a></li><li><a href="test_parser_cpp.html">test_parser_cpp</a></li><li><a href="test_parser_java.html">test_parser_java</a></li><li><a href="test_parser_matlab.html">test_parser_matlab</a></li><li><a href="test_parser_python.html">test_parser_python</a></li><li><a href="test_resume_progress.html">test_resume_progress</a></li><li><a href="test_retrofit_sidebar.html">test_retrofit_sidebar</a></li><li><a href="test_reviewer.html">test_reviewer</a></li><li><a href="test_sanitize_docs.html">test_sanitize_docs</a></li><li><a href="test_scanner.html">test_scanner</a></li></ul></details></li></ul>
</div>
<main class="content" role="main">
        <div class="content-inner">
<h1>test_cache</h1>
<p>Module defines tests for `ResponseCache` class functionality including cache round-trip operations, handling missing keys, and progress tracking with clearing capabilities.</p>
<h2>Functions</h2>
<h3 id="test_cache_round_trip">test_cache_round_trip(tmp_path: Path) -&gt; None</h3>
<p>The function `test_cache_round_trip` tests the round-trip functionality of a `ResponseCache` object. It creates a cache file in a temporary directory, initializes a `ResponseCache` with that file, stores a key-value pair ("file.py", "content" -&gt; "summary"), and then reads the data back from the cache file using a new `ResponseCache` instance to verify that the stored value can be retrieved correctly.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_cache_round_trip</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    cache_file <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">"cache.json"</span>
    cache <span style="color: #666666">=</span> ResponseCache(<span style="color: #008000">str</span>(cache_file))
    key <span style="color: #666666">=</span> ResponseCache<span style="color: #666666">.</span>make_key(<span style="color: #BA2121">"file.py"</span>, <span style="color: #BA2121">"content"</span>)
    cache<span style="color: #666666">.</span>set(key, <span style="color: #BA2121">"summary"</span>)

    new_cache <span style="color: #666666">=</span> ResponseCache(<span style="color: #008000">str</span>(cache_file))
    <span style="color: #008000; font-weight: bold">assert</span> new_cache<span style="color: #666666">.</span>get(key) <span style="color: #666666">==</span> <span style="color: #BA2121">"summary"</span>
</code></pre>
<h3 id="test_cache_get_missing">test_cache_get_missing(tmp_path: Path) -&gt; None</h3>
<p>The function `test_cache_get_missing` tests the behavior of a `ResponseCache` object when retrieving a non-existent key. It creates a `ResponseCache` instance using a temporary file path, then calls the `get` method with a key `"unknown"` that does not exist in the cache. The assertion checks that the result is `None`, verifying that the cache correctly returns `None` for missing keys.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_cache_get_missing</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    cache <span style="color: #666666">=</span> ResponseCache(<span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">"cache.json"</span>))
    <span style="color: #008000; font-weight: bold">assert</span> cache<span style="color: #666666">.</span>get(<span style="color: #BA2121">"unknown"</span>) <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000; font-weight: bold">None</span>
</code></pre>
<h3 id="test_progress_tracking">test_progress_tracking(tmp_path: Path) -&gt; None</h3>
<p>The function `test_progress_tracking` tests the progress tracking functionality of the `ResponseCache` class. It creates a cache file at a temporary path, initializes a `ResponseCache` object with that file, and sets a progress entry for a module with associated data. It then verifies that the cached data can be retrieved correctly by creating a new `ResponseCache` instance from the same file. Finally, it clears the progress and confirms that the cache is empty.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_progress_tracking</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    cache_file <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">"cache.json"</span>
    cache <span style="color: #666666">=</span> ResponseCache(<span style="color: #008000">str</span>(cache_file))
    module_data <span style="color: #666666">=</span> {<span style="color: #BA2121">"path"</span>: <span style="color: #BA2121">"mod.py"</span>, <span style="color: #BA2121">"summary"</span>: <span style="color: #BA2121">"s"</span>}
    cache<span style="color: #666666">.</span>set_progress_entry(<span style="color: #BA2121">"mod.py"</span>, module_data)

    new_cache <span style="color: #666666">=</span> ResponseCache(<span style="color: #008000">str</span>(cache_file))
    <span style="color: #008000; font-weight: bold">assert</span> new_cache<span style="color: #666666">.</span>get_progress() <span style="color: #666666">==</span> {<span style="color: #BA2121">"mod.py"</span>: module_data}

    new_cache<span style="color: #666666">.</span>clear_progress()
    <span style="color: #008000; font-weight: bold">assert</span> new_cache<span style="color: #666666">.</span>get_progress() <span style="color: #666666">==</span> {}
</code></pre>
</div>
    </main>
<script src="static/toggle.js"></script>
</body>
</html>
