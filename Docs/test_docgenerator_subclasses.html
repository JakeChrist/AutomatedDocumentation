<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test_docgenerator_subclasses</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul>
        <li><a href="index.html"><strong>üè† Project Overview</strong></a></li>
<li><a href="cache.html">cache</a></li>
<li><a href="docgenerator.html">docgenerator</a></li>
<li><a href="html_writer.html">html_writer</a></li>
<li><a href="llm_client.html">llm_client</a></li>
<li><a href="parser_matlab.html">parser_matlab</a></li>
<li><a href="parser_python.html">parser_python</a></li>
<li><a href="reviewer.html">reviewer</a></li>
<li><a href="scanner.html">scanner</a></li>
<li><a href="test_cache.html">test_cache</a></li>
<li><a href="test_docgenerator.html">test_docgenerator</a></li>
<li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li>
<li><a href="test_html_writer.html">test_html_writer</a></li>
<li><a href="test_integration.html">test_integration</a></li>
<li><a href="test_llm_client.html">test_llm_client</a></li>
<li><a href="test_parser_matlab.html">test_parser_matlab</a></li>
<li><a href="test_parser_python.html">test_parser_python</a></li>
<li><a href="test_reviewer.html">test_reviewer</a></li>
<li><a href="test_scanner.html">test_scanner</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>test_docgenerator_subclasses</h1>
        <p>This module defines a test function `test_subclass_docs_and_method_summary` that uses the `unittest.mock.patch` decorator to mock an `LLMClient`. The function creates a temporary project directory with a Python module containing a nested class and a method. It then calls the `main` function from the `docgenerator` module, passing the path to the project directory and specifying an output directory for documentation. The test asserts that the return value of `main` is 0, indicating success. Additionally, it checks that the generated HTML documentation contains summaries for the nested class and its method.</p>
<h2>Functions</h2>
<h3 id="test_subclass_docs_and_method_summary">test_subclass_docs_and_method_summary(tmp_path: Path) -&gt; None</h3>
<p>The function `test_subclass_docs_and_method_summary` tests the documentation generation process for a Python project containing a subclass with a method. It sets up a temporary project directory, creates a Python file with a nested class and method, and configures an mock LLM client to return summaries for classes and methods. The function then runs the main documentation generation process and checks if the generated HTML contains the expected summary elements for both the class and the method.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_subclass_docs_and_method_summary</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    project_dir <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;proj&quot;</span>
    project_dir<span style="color: #666666">.</span>mkdir()
    (project_dir <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;mod.py&quot;</span>)<span style="color: #666666">.</span>write_text(
        <span style="color: #BA2121">&quot;class A:</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    class B:</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">        def m(self):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">            pass</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>
    )

    output_dir <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;docs&quot;</span>

    <span style="color: #008000; font-weight: bold">with</span> patch(<span style="color: #BA2121">&quot;docgenerator.LLMClient&quot;</span>) <span style="color: #008000; font-weight: bold">as</span> MockClient:
        instance <span style="color: #666666">=</span> MockClient<span style="color: #666666">.</span>return_value
        instance<span style="color: #666666">.</span>ping<span style="color: #666666">.</span>return_value <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">True</span>
        instance<span style="color: #666666">.</span>summarize<span style="color: #666666">.</span>side_effect <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">lambda</span> text, pt: <span style="color: #BA2121">f&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>pt<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> summary&quot;</span>
        ret <span style="color: #666666">=</span> main([<span style="color: #008000">str</span>(project_dir), <span style="color: #BA2121">&quot;--output&quot;</span>, <span style="color: #008000">str</span>(output_dir)])
        <span style="color: #008000; font-weight: bold">assert</span> ret <span style="color: #666666">==</span> <span style="color: #666666">0</span>

    html <span style="color: #666666">=</span> (output_dir <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;mod.html&quot;</span>)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    pos <span style="color: #666666">=</span> html<span style="color: #666666">.</span>find(<span style="color: #BA2121">&quot;&lt;summary&gt;Class: B&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> pos <span style="color: #666666">!=</span> <span style="color: #666666">-1</span>
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>find(<span style="color: #BA2121">&quot;docstring summary&quot;</span>, pos) <span style="color: #666666">!=</span> <span style="color: #666666">-1</span>
    method_pos <span style="color: #666666">=</span> html<span style="color: #666666">.</span>find(<span style="color: #BA2121">&quot;Method:&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> method_pos <span style="color: #666666">!=</span> <span style="color: #666666">-1</span> <span style="color: #AA22FF; font-weight: bold">and</span> html<span style="color: #666666">.</span>find(<span style="color: #BA2121">&quot;function summary&quot;</span>, method_pos) <span style="color: #666666">!=</span> <span style="color: #666666">-1</span>
</code></pre>
    </div>
</body>
</html>
