<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>sanitize_docs</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><a href="cache.html">cache</a></li><li><a href="chunk_utils.html">chunk_utils</a></li><li><a href="docgenerator.html">docgenerator</a></li><li><a href="explaincode.html">explaincode</a></li><li><a href="gui_wrapper.html">gui_wrapper</a></li><li><a href="html_writer.html">html_writer</a></li><li><a href="llm_client.html">llm_client</a></li><li><a href="manual_utils.html">manual_utils</a></li><li><a href="parser_cpp.html">parser_cpp</a></li><li><a href="parser_java.html">parser_java</a></li><li><a href="parser_matlab.html">parser_matlab</a></li><li><a href="parser_python.html">parser_python</a></li><li><a href="retrofit_sidebar.html">retrofit_sidebar</a></li><li><a href="reviewer.html">reviewer</a></li><li><a href="sanitize_docs.html">sanitize_docs</a></li><li><a href="scanner.html">scanner</a></li><li><a href="setup.html">setup</a></li><li><a href="summarize_utils.html">summarize_utils</a></li><li><details><summary>tests</summary><ul><li><a href="test_cache.html">test_cache</a></li><li><a href="test_chunk_utils.html">test_chunk_utils</a></li><li><a href="test_docgenerator.html">test_docgenerator</a></li><li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li><li><a href="test_explaincode.html">test_explaincode</a></li><li><a href="test_html_writer.html">test_html_writer</a></li><li><a href="test_integration.html">test_integration</a></li><li><a href="test_llm_client.html">test_llm_client</a></li><li><a href="test_manual_utils.html">test_manual_utils</a></li><li><a href="test_parser_cpp.html">test_parser_cpp</a></li><li><a href="test_parser_java.html">test_parser_java</a></li><li><a href="test_parser_matlab.html">test_parser_matlab</a></li><li><a href="test_parser_python.html">test_parser_python</a></li><li><a href="test_resume_progress.html">test_resume_progress</a></li><li><a href="test_retrofit_sidebar.html">test_retrofit_sidebar</a></li><li><a href="test_reviewer.html">test_reviewer</a></li><li><a href="test_sanitize_docs.html">test_sanitize_docs</a></li><li><a href="test_scanner.html">test_scanner</a></li></ul></details></li></ul>
    </div>
    <div class="content">
        <h1>sanitize_docs</h1>
        <p>The module provides functionality to sanitize HTML documentation files within a specified directory. It uses a regular expression pattern to identify specific HTML tags (p, li, h1-h6) and applies content cleaning through the `sanitize_summary` function from `llm_client`. The sanitized content replaces the original text within these tags. A command-line interface accepts a directory path and processes all HTML files found recursively within that directory, modifying them in place. The script exits with status code 0 upon successful completion.</p>
<h2>Functions</h2>
<h3 id="_sanitize_html">_sanitize_html(html: str) -&gt; str</h3>
<p>The function `_sanitize_html` processes HTML strings to clean and sanitize content within specific HTML tags (`p`, `li`, and heading tags `h1` through `h6`). It uses a regular expression pattern to identify these tags and their content, removes nested HTML tags from the content, and applies a `sanitize_summary` function to further clean the inner text. The result is a modified HTML string where the content of the specified tags has been sanitized while preserving the tag structure.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_sanitize_html</span>(html: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">repl</span>(match: re<span style="color: #666666">.</span>Match[<span style="color: #008000">str</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
        tag, content <span style="color: #666666">=</span> match<span style="color: #666666">.</span>group(<span style="color: #666666">1</span>), match<span style="color: #666666">.</span>group(<span style="color: #666666">2</span>)
        inner <span style="color: #666666">=</span> re<span style="color: #666666">.</span>sub(<span style="color: #BA2121">r&quot;&lt;[^&gt;]+&gt;&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>, content)
        cleaned <span style="color: #666666">=</span> sanitize_summary(inner)
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">f&quot;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>cleaned<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&quot;</span>

    pattern <span style="color: #666666">=</span> <span style="color: #BA2121">r&quot;&lt;(p|li|h[1-6])&gt;(.*?)&lt;/\1&gt;&quot;</span>
    <span style="color: #008000; font-weight: bold">return</span> re<span style="color: #666666">.</span>sub(pattern, repl, html, flags<span style="color: #666666">=</span>re<span style="color: #666666">.</span>DOTALL <span style="color: #666666">|</span> re<span style="color: #666666">.</span>IGNORECASE)
</code></pre>
<details>
<summary>Subfunction: repl(match: re.Match[str]) -&gt; str</summary>
<h4 id="repl">repl(match: re.Match[str]) -&gt; str</h4>
<p>The function `repl` takes a regular expression match object and processes the matched groups to clean and reformat HTML content. It extracts the tag name and content from the match, removes any nested HTML tags from the content using a regular expression, sanitizes the cleaned content with the `sanitize_summary` function, and returns a new HTML tag with the sanitized content. The function is designed to be used as a replacement function in `re.sub` to process matched HTML tags and their contents.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">repl</span>(match: re<span style="color: #666666">.</span>Match[<span style="color: #008000">str</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
        tag, content <span style="color: #666666">=</span> match<span style="color: #666666">.</span>group(<span style="color: #666666">1</span>), match<span style="color: #666666">.</span>group(<span style="color: #666666">2</span>)
        inner <span style="color: #666666">=</span> re<span style="color: #666666">.</span>sub(<span style="color: #BA2121">r&quot;&lt;[^&gt;]+&gt;&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>, content)
        cleaned <span style="color: #666666">=</span> sanitize_summary(inner)
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">f&quot;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>cleaned<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&quot;</span>
</code></pre>
</details>
<h3 id="sanitize_directory">sanitize_directory(directory: Path) -&gt; None</h3>
<p>The function `sanitize_directory` processes all HTML files within a specified directory and its subdirectories. It reads each HTML file&#x27;s content, applies an HTML sanitization function `_sanitize_html` to the content, and then writes the sanitized content back to the same file, preserving the original file structure and encoding. The function operates in-place, modifying existing HTML files rather than creating new ones.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">sanitize_directory</span>(directory: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    <span style="color: #008000; font-weight: bold">for</span> path <span style="color: #AA22FF; font-weight: bold">in</span> directory<span style="color: #666666">.</span>rglob(<span style="color: #BA2121">&quot;*.html&quot;</span>):
        html <span style="color: #666666">=</span> path<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
        sanitized <span style="color: #666666">=</span> _sanitize_html(html)
        path<span style="color: #666666">.</span>write_text(sanitized, encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
</code></pre>
<h3 id="main">main(argv: list[str] | None=None) -&gt; int</h3>
<p>The function `main` is the entry point for a command-line utility that sanitizes generated HTML documentation. It accepts an optional list of command-line arguments and uses `argparse` to define and parse a required positional argument, `directory`, which specifies the path to the HTML output directory. The function calls `sanitize_directory` with the provided directory path to perform the sanitization process. It returns an integer value of 0 upon successful completion.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>(argv: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>] <span style="color: #666666">|</span> <span style="color: #008000; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">int</span>:
    parser <span style="color: #666666">=</span> argparse<span style="color: #666666">.</span>ArgumentParser(
        description<span style="color: #666666">=</span><span style="color: #BA2121">&quot;Sanitize generated HTML documentation&quot;</span>,
    )
    parser<span style="color: #666666">.</span>add_argument(<span style="color: #BA2121">&quot;directory&quot;</span>, help<span style="color: #666666">=</span><span style="color: #BA2121">&quot;Path to the HTML output directory&quot;</span>)
    args <span style="color: #666666">=</span> parser<span style="color: #666666">.</span>parse_args(argv)
    sanitize_directory(Path(args<span style="color: #666666">.</span>directory))
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
