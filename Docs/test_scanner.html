<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test_scanner</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><a href="cache.html">cache</a></li><li><a href="chunk_utils.html">chunk_utils</a></li><li><a href="docgenerator.html">docgenerator</a></li><li><a href="explaincode.html">explaincode</a></li><li><a href="gui_wrapper.html">gui_wrapper</a></li><li><a href="html_writer.html">html_writer</a></li><li><a href="llm_client.html">llm_client</a></li><li><a href="manual_utils.html">manual_utils</a></li><li><a href="parser_cpp.html">parser_cpp</a></li><li><a href="parser_java.html">parser_java</a></li><li><a href="parser_matlab.html">parser_matlab</a></li><li><a href="parser_python.html">parser_python</a></li><li><a href="retrofit_sidebar.html">retrofit_sidebar</a></li><li><a href="reviewer.html">reviewer</a></li><li><a href="sanitize_docs.html">sanitize_docs</a></li><li><a href="scanner.html">scanner</a></li><li><a href="setup.html">setup</a></li><li><a href="summarize_utils.html">summarize_utils</a></li><li><details><summary>tests</summary><ul><li><a href="test_cache.html">test_cache</a></li><li><a href="test_chunk_utils.html">test_chunk_utils</a></li><li><a href="test_docgenerator.html">test_docgenerator</a></li><li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li><li><a href="test_explaincode.html">test_explaincode</a></li><li><a href="test_html_writer.html">test_html_writer</a></li><li><a href="test_integration.html">test_integration</a></li><li><a href="test_llm_client.html">test_llm_client</a></li><li><a href="test_manual_utils.html">test_manual_utils</a></li><li><a href="test_parser_cpp.html">test_parser_cpp</a></li><li><a href="test_parser_java.html">test_parser_java</a></li><li><a href="test_parser_matlab.html">test_parser_matlab</a></li><li><a href="test_parser_python.html">test_parser_python</a></li><li><a href="test_resume_progress.html">test_resume_progress</a></li><li><a href="test_retrofit_sidebar.html">test_retrofit_sidebar</a></li><li><a href="test_reviewer.html">test_reviewer</a></li><li><a href="test_sanitize_docs.html">test_sanitize_docs</a></li><li><a href="test_scanner.html">test_scanner</a></li></ul></details></li></ul>
    </div>
    <div class="content">
        <h1>test_scanner</h1>
        <p>Module defines tests for a `scan_directory` function that identifies specific file types while ignoring designated folders. Tests verify behavior with ignored directories, mixed file extensions, Git folder exclusion, and support for C++, C++, and Java file types. Helper function `create_files` generates test files in specified paths. Tests use `tmp_path` fixture for temporary directories and assert expected file paths are returned.</p>
<h2>Functions</h2>
<h3 id="create_files">create_files(base: Path, files: list[str]) -&gt; None</h3>
<p>The function `create_files` creates a list of files at a specified base directory path. It takes a base path and a list of relative file paths as input. For each relative path in the list, it constructs the full path by joining it with the base path, ensures the parent directories exist by creating them if necessary, and writes an empty text file at that location.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">create_files</span>(base: Path, files: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    <span style="color: #008000; font-weight: bold">for</span> rel <span style="color: #AA22FF; font-weight: bold">in</span> files:
        path <span style="color: #666666">=</span> base <span style="color: #666666">/</span> rel
        path<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>mkdir(parents<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>, exist_ok<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
        path<span style="color: #666666">.</span>write_text(<span style="color: #BA2121">&quot;&quot;</span>)
</code></pre>
<h3 id="test_scan_directory_ignore_folder">test_scan_directory_ignore_folder(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_ignore_folder` tests the behavior of `scan_directory` by verifying that it correctly ignores specified folders during file traversal. It creates a temporary directory structure with files in the root and a subdirectory named &quot;ignore_me&quot;, then calls `scan_directory` with the path to the temporary directory and a list containing &quot;ignore_me&quot; as the folder to ignore. The result is compared against an expected set of file paths that excludes those within the ignored folder, confirming that only files from the root and other subdirectories are returned.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_ignore_folder</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;a.py&quot;</span>,
            <span style="color: #BA2121">&quot;b.m&quot;</span>,
            <span style="color: #BA2121">&quot;c.txt&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;sub&quot;</span>, <span style="color: #BA2121">&quot;d.py&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;ignore_me&quot;</span>, <span style="color: #BA2121">&quot;e.py&quot;</span>),
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [<span style="color: #BA2121">&quot;ignore_me&quot;</span>])

    expected <span style="color: #666666">=</span> {
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;a.py&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;b.m&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;sub&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;d.py&quot;</span>),
    }
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">set</span>(result) <span style="color: #666666">==</span> expected
</code></pre>
<h3 id="test_scan_directory_mixed_file_types">test_scan_directory_mixed_file_types(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_mixed_file_types` tests the `scan_directory` function by creating a temporary directory structure containing files of various types (Python, MATLAB, text, Markdown) in both root and nested directories. It then calls `scan_directory` to retrieve a list of file paths and asserts that the result matches an expected set of Python and MATLAB files, excluding text and Markdown files. The test verifies that `scan_directory` correctly identifies and returns only files with supported extensions (`.py` and `.m`) while ignoring others.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_mixed_file_types</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;one.py&quot;</span>,
            <span style="color: #BA2121">&quot;two.m&quot;</span>,
            <span style="color: #BA2121">&quot;three.txt&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;four.py&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;five.md&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;six.m&quot;</span>),
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [])

    expected <span style="color: #666666">=</span> {
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;one.py&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;two.m&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;four.py&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;six.m&quot;</span>),
    }
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">set</span>(result) <span style="color: #666666">==</span> expected
</code></pre>
<h3 id="test_scan_directory_skips_git_folder">test_scan_directory_skips_git_folder(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_skips_git_folder` tests the behavior of `scan_directory` to ensure it excludes files located within a `.git` folder. It creates a temporary directory structure containing a Python file in the root and additional Python files nested under `.git` and `.git/sub`. After calling `scan_directory` on the temporary path, it verifies that the path to `good.py` is present in the result and that no paths containing `.git` are included. This confirms that the scanning process correctly ignores Git-related directories.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_skips_git_folder</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;good.py&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;.git&quot;</span>, <span style="color: #BA2121">&quot;ignored.py&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;.git&quot;</span>, <span style="color: #BA2121">&quot;sub&quot;</span>, <span style="color: #BA2121">&quot;also.py&quot;</span>),
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [])

    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;good.py&quot;</span>) <span style="color: #AA22FF; font-weight: bold">in</span> result
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">any</span>(<span style="color: #BA2121">&quot;.git&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> p <span style="color: #008000; font-weight: bold">for</span> p <span style="color: #AA22FF; font-weight: bold">in</span> result)
</code></pre>
<h3 id="test_scan_directory_supports_cpp_h_java">test_scan_directory_supports_cpp_h_java(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_supports_cpp_h_java` tests the `scan_directory` functionality to ensure it correctly identifies and returns paths of files with extensions `.cpp`, `.h`, and `.java` within a given directory and its subdirectories. It creates a temporary directory structure containing these file types along with other files (like `.txt`) that should be ignored. The test verifies that `scan_directory` returns only the expected paths for the supported file types, confirming proper filtering behavior.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_supports_cpp_h_java</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;main.cpp&quot;</span>,
            <span style="color: #BA2121">&quot;header.h&quot;</span>,
            <span style="color: #BA2121">&quot;Program.java&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;util.cpp&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;helper.h&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;Example.java&quot;</span>),
            <span style="color: #BA2121">&quot;skip.txt&quot;</span>,
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [])

    expected <span style="color: #666666">=</span> {
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;main.cpp&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;header.h&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;Program.java&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;util.cpp&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;helper.h&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;Example.java&quot;</span>),
    }
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">set</span>(result) <span style="color: #666666">==</span> expected
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
