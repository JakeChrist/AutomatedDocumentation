<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test_scanner</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><a href="cache.html">cache</a></li><li><a href="chunk_utils.html">chunk_utils</a></li><li><a href="docgenerator.html">docgenerator</a></li><li><a href="explaincode.html">explaincode</a></li><li><a href="gui_wrapper.html">gui_wrapper</a></li><li><a href="html_writer.html">html_writer</a></li><li><a href="llm_client.html">llm_client</a></li><li><a href="manual_utils.html">manual_utils</a></li><li><a href="parser_cpp.html">parser_cpp</a></li><li><a href="parser_java.html">parser_java</a></li><li><a href="parser_matlab.html">parser_matlab</a></li><li><a href="parser_python.html">parser_python</a></li><li><a href="retrofit_sidebar.html">retrofit_sidebar</a></li><li><a href="reviewer.html">reviewer</a></li><li><a href="sanitize_docs.html">sanitize_docs</a></li><li><a href="scanner.html">scanner</a></li><li><a href="setup.html">setup</a></li><li><a href="summarize_utils.html">summarize_utils</a></li><li><details><summary>tests</summary><ul><li><a href="test_cache.html">test_cache</a></li><li><a href="test_chunk_utils.html">test_chunk_utils</a></li><li><a href="test_docgenerator.html">test_docgenerator</a></li><li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li><li><a href="test_explaincode.html">test_explaincode</a></li><li><a href="test_html_writer.html">test_html_writer</a></li><li><a href="test_integration.html">test_integration</a></li><li><a href="test_llm_client.html">test_llm_client</a></li><li><a href="test_manual_utils.html">test_manual_utils</a></li><li><a href="test_parser_cpp.html">test_parser_cpp</a></li><li><a href="test_parser_java.html">test_parser_java</a></li><li><a href="test_parser_matlab.html">test_parser_matlab</a></li><li><a href="test_parser_python.html">test_parser_python</a></li><li><a href="test_resume_progress.html">test_resume_progress</a></li><li><a href="test_reviewer.html">test_reviewer</a></li><li><a href="test_sanitize_docs.html">test_sanitize_docs</a></li><li><a href="test_scanner.html">test_scanner</a></li></ul></details></li></ul>
    </div>
    <div class="content">
        <h1>test_scanner</h1>
        <p>The module defines a function `scan_directory` from the `scanner` module and tests for its functionality using `pytest`. It includes tests to verify that directories can be ignored, mixed file types are included, `.git` folder is skipped, and various programming languages&#x27; files (Python, Objective-C, Java, C++, C) are correctly identified.</p>
<h2>Functions</h2>
<h3 id="create_files">create_files(base: Path, files: list[str]) -&gt; None</h3>
<p>The `create_files` function takes a base directory and a list of file paths relative to the base directory. It iterates over each file path, creates any necessary parent directories (if they do not already exist), and writes an empty string to each file.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">create_files</span>(base: Path, files: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    <span style="color: #008000; font-weight: bold">for</span> rel <span style="color: #AA22FF; font-weight: bold">in</span> files:
        path <span style="color: #666666">=</span> base <span style="color: #666666">/</span> rel
        path<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>mkdir(parents<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>, exist_ok<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
        path<span style="color: #666666">.</span>write_text(<span style="color: #BA2121">&quot;&quot;</span>)
</code></pre>
<h3 id="test_scan_directory_ignore_folder">test_scan_directory_ignore_folder(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_ignore_folder` is a unit test for the `scan_directory` function. It creates a temporary directory with various files and subdirectories, including an ignored folder named &quot;ignore_me&quot;. The function then scans the directory, excluding the &quot;ignore_me&quot; folder, and returns a set of file paths that were found. The test asserts that the result matches the expected set of file paths, ensuring that the ignored folder is not included in the scan results.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_ignore_folder</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;a.py&quot;</span>,
            <span style="color: #BA2121">&quot;b.m&quot;</span>,
            <span style="color: #BA2121">&quot;c.txt&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;sub&quot;</span>, <span style="color: #BA2121">&quot;d.py&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;ignore_me&quot;</span>, <span style="color: #BA2121">&quot;e.py&quot;</span>),
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [<span style="color: #BA2121">&quot;ignore_me&quot;</span>])

    expected <span style="color: #666666">=</span> {
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;a.py&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;b.m&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;sub&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;d.py&quot;</span>),
    }
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">set</span>(result) <span style="color: #666666">==</span> expected
</code></pre>
<h3 id="test_scan_directory_mixed_file_types">test_scan_directory_mixed_file_types(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_mixed_file_types` is a test case designed to verify the functionality of scanning a directory for files with mixed file types. It uses a temporary path provided by `tmp_path` and creates several files within this path, including Python (.py), MATLAB (.m), and text (.txt) files, as well as nested files in a subdirectory.

The function then calls `scan_directory` with the path of the temporary directory and an empty list. The result of this function call is compared to an expected set of file paths, which includes all the Python and MATLAB files created, excluding the text file and the Markdown (.md) file in the nested directory. The assertion checks if the set of returned file paths matches the expected set.

This test ensures that the `scan_directory` function correctly identifies and returns only the relevant file types specified for scanning.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_mixed_file_types</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;one.py&quot;</span>,
            <span style="color: #BA2121">&quot;two.m&quot;</span>,
            <span style="color: #BA2121">&quot;three.txt&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;four.py&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;five.md&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;six.m&quot;</span>),
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [])

    expected <span style="color: #666666">=</span> {
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;one.py&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;two.m&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;four.py&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;six.m&quot;</span>),
    }
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">set</span>(result) <span style="color: #666666">==</span> expected
</code></pre>
<h3 id="test_scan_directory_skips_git_folder">test_scan_directory_skips_git_folder(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_skips_git_folder` tests the behavior of a hypothetical `scan_directory` function when scanning a directory. It creates a temporary directory with files, including one inside a `.git` subdirectory that should be ignored. The function scans the directory and asserts that only non-`.git` files are included in the result.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_skips_git_folder</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;good.py&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;.git&quot;</span>, <span style="color: #BA2121">&quot;ignored.py&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;.git&quot;</span>, <span style="color: #BA2121">&quot;sub&quot;</span>, <span style="color: #BA2121">&quot;also.py&quot;</span>),
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [])

    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;good.py&quot;</span>) <span style="color: #AA22FF; font-weight: bold">in</span> result
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">any</span>(<span style="color: #BA2121">&quot;.git&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> p <span style="color: #008000; font-weight: bold">for</span> p <span style="color: #AA22FF; font-weight: bold">in</span> result)
</code></pre>
<h3 id="test_scan_directory_supports_cpp_h_java">test_scan_directory_supports_cpp_h_java(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_supports_cpp_h_java` tests the functionality of scanning a directory for supported file types, specifically C++, C header, and Java files. It creates a temporary directory with various files, including nested subdirectories, and then uses the `scan_directory` function to scan this directory. The expected result is a set of paths to all supported files found in the directory and its subdirectories. The test asserts that the actual result matches the expected set of file paths.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_supports_cpp_h_java</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;main.cpp&quot;</span>,
            <span style="color: #BA2121">&quot;header.h&quot;</span>,
            <span style="color: #BA2121">&quot;Program.java&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;util.cpp&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;helper.h&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;Example.java&quot;</span>),
            <span style="color: #BA2121">&quot;skip.txt&quot;</span>,
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [])

    expected <span style="color: #666666">=</span> {
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;main.cpp&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;header.h&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;Program.java&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;util.cpp&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;helper.h&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;Example.java&quot;</span>),
    }
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">set</span>(result) <span style="color: #666666">==</span> expected
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
