<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test_scanner</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul>
        <li><a href="index.html"><strong>üè† Project Overview</strong></a></li>
<li><a href="cache.html">cache</a></li>
<li><a href="docgenerator.html">docgenerator</a></li>
<li><a href="html_writer.html">html_writer</a></li>
<li><a href="llm_client.html">llm_client</a></li>
<li><a href="parser_matlab.html">parser_matlab</a></li>
<li><a href="parser_python.html">parser_python</a></li>
<li><a href="reviewer.html">reviewer</a></li>
<li><a href="scanner.html">scanner</a></li>
<li><a href="test_cache.html">test_cache</a></li>
<li><a href="test_docgenerator.html">test_docgenerator</a></li>
<li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li>
<li><a href="test_html_writer.html">test_html_writer</a></li>
<li><a href="test_integration.html">test_integration</a></li>
<li><a href="test_llm_client.html">test_llm_client</a></li>
<li><a href="test_parser_matlab.html">test_parser_matlab</a></li>
<li><a href="test_parser_python.html">test_parser_python</a></li>
<li><a href="test_reviewer.html">test_reviewer</a></li>
<li><a href="test_scanner.html">test_scanner</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>test_scanner</h1>
        <p>The module defines a test suite for the `scan_directory` function from the `scanner` module. It includes three tests:

1. `test_scan_directory_ignore_folder`: Verifies that directories specified in the ignore list are excluded from the scan results.
2. `test_scan_directory_mixed_file_types`: Ensures that files of various types (Python, Objective-C, text) are included in the scan results when no specific filters are applied.
3. `test_scan_directory_skips_git_folder`: Confirms that the `.git` directory and its contents are not included in the scan results.

Each test creates a temporary directory with predefined files and directories, calls `scan_directory`, and asserts that the returned set of file paths matches the expected outcome based on the test case.</p>
<h2>Functions</h2>
<h3 id="create_files">create_files(base: Path, files: list[str]) -&gt; None</h3>
<p>The `create_files` function takes a base directory and a list of relative file paths as input. It iterates over each relative path, constructs the full path by appending it to the base directory, creates any necessary parent directories (if they don&#x27;t already exist), and then writes an empty string to the file at that path.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">create_files</span>(base: Path, files: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    <span style="color: #008000; font-weight: bold">for</span> rel <span style="color: #AA22FF; font-weight: bold">in</span> files:
        path <span style="color: #666666">=</span> base <span style="color: #666666">/</span> rel
        path<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>mkdir(parents<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>, exist_ok<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
        path<span style="color: #666666">.</span>write_text(<span style="color: #BA2121">&quot;&quot;</span>)
</code></pre>
<h3 id="test_scan_directory_ignore_folder">test_scan_directory_ignore_folder(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_ignore_folder` tests the `scan_directory` function to ensure it correctly ignores specified subpaths when scanning directories for code files. It creates a temporary directory with various files and subdirectories, including one that should be ignored. The function then calls `scan_directory` with the path of the temporary directory and a list containing the name of the directory to ignore. The result is compared to an expected set of file paths, which excludes the ignored subdirectory.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_ignore_folder</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;a.py&quot;</span>,
            <span style="color: #BA2121">&quot;b.m&quot;</span>,
            <span style="color: #BA2121">&quot;c.txt&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;sub&quot;</span>, <span style="color: #BA2121">&quot;d.py&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;ignore_me&quot;</span>, <span style="color: #BA2121">&quot;e.py&quot;</span>),
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [<span style="color: #BA2121">&quot;ignore_me&quot;</span>])

    expected <span style="color: #666666">=</span> {
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;a.py&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;b.m&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;sub&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;d.py&quot;</span>),
    }
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">set</span>(result) <span style="color: #666666">==</span> expected
</code></pre>
<h3 id="test_scan_directory_mixed_file_types">test_scan_directory_mixed_file_types(tmp_path: Path) -&gt; None</h3>
<p>The function `test_scan_directory_mixed_file_types` tests the `scan_directory` function with a directory containing files of mixed types. It creates a temporary directory with various file types, including Python (`one.py`, `four.py`), MATLAB (`two.m`, `six.m`), and text (`three.txt`) files, as well as nested directories with additional files. The function then calls `scan_directory` on the temporary path and asserts that the result matches the expected set of file paths, excluding Markdown files (`five.md`).</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_mixed_file_types</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;one.py&quot;</span>,
            <span style="color: #BA2121">&quot;two.m&quot;</span>,
            <span style="color: #BA2121">&quot;three.txt&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;four.py&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;five.md&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;nested&quot;</span>, <span style="color: #BA2121">&quot;six.m&quot;</span>),
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [])

    expected <span style="color: #666666">=</span> {
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;one.py&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;two.m&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;four.py&quot;</span>),
        <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;six.m&quot;</span>),
    }
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">set</span>(result) <span style="color: #666666">==</span> expected
</code></pre>
<h3 id="test_scan_directory_skips_git_folder">test_scan_directory_skips_git_folder(tmp_path: Path) -&gt; None</h3>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_scan_directory_skips_git_folder</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    create_files(
        tmp_path,
        [
            <span style="color: #BA2121">&quot;good.py&quot;</span>,
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;.git&quot;</span>, <span style="color: #BA2121">&quot;ignored.py&quot;</span>),
            os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&quot;.git&quot;</span>, <span style="color: #BA2121">&quot;sub&quot;</span>, <span style="color: #BA2121">&quot;also.py&quot;</span>),
        ],
    )

    result <span style="color: #666666">=</span> scan_directory(<span style="color: #008000">str</span>(tmp_path), [])

    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">str</span>(tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;good.py&quot;</span>) <span style="color: #AA22FF; font-weight: bold">in</span> result
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">any</span>(<span style="color: #BA2121">&quot;.git&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> p <span style="color: #008000; font-weight: bold">for</span> p <span style="color: #AA22FF; font-weight: bold">in</span> result)
</code></pre>
    </div>
</body>
</html>
