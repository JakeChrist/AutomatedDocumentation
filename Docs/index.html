<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Project Documentation</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul>
        <li><a href="cache.html">cache</a></li>
<li><a href="docgenerator.html">docgenerator</a></li>
<li><a href="html_writer.html">html_writer</a></li>
<li><a href="llm_client.html">llm_client</a></li>
<li><a href="parser_matlab.html">parser_matlab</a></li>
<li><a href="parser_python.html">parser_python</a></li>
<li><a href="reviewer.html">reviewer</a></li>
<li><a href="scanner.html">scanner</a></li>
<li><a href="test_cache.html">test_cache</a></li>
<li><a href="test_docgenerator.html">test_docgenerator</a></li>
<li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li>
<li><a href="test_html_writer.html">test_html_writer</a></li>
<li><a href="test_integration.html">test_integration</a></li>
<li><a href="test_llm_client.html">test_llm_client</a></li>
<li><a href="test_parser_matlab.html">test_parser_matlab</a></li>
<li><a href="test_parser_python.html">test_parser_python</a></li>
<li><a href="test_reviewer.html">test_reviewer</a></li>
<li><a href="test_scanner.html">test_scanner</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>Project Documentation</h1>
        <p>DocGen-LM is a tool for generating static HTML documentation for Python and MATLAB projects by analyzing source files with a local Large Language Model (LLM). It supports capturing and rendering nested functions and subclasses, presenting complex structures as expandable sections in the output. The tool can be used via a command-line interface, which allows specifying the project directory, output location, and optional parameters such as LLM server URL and model name.
This project consists of several modules and classes designed to process and summarize code files. The `cache.py` module defines a `ResponseCache` class for caching responses. The `docgenerator.py` module includes functions for cleaning output directories, summarizing text, and generating documentation from Python and MATLAB files. It also contains a main function for orchestrating the documentation generation process.

The `html_writer.py` module provides functions for rendering HTML content, including highlighting code snippets and writing index and module pages. The `llm_client.py` class, `LLMClient`, handles interactions with a language model to generate summaries, with a method for sanitizing summaries.

The `parser_matlab.py` and `parser_python.py` modules contain functions for parsing MATLAB and Python files, respectively, extracting classes and functions, and formatting their signatures and arguments. The `reviewer.py` module includes functions for reviewing generated documentation, checking for issues like assistant phrasing, contradictions, and hallucinations.

The `scanner.py` module defines a function to scan directories for code files, ignoring certain subpaths. Test modules (`test_cache.py`, `test_docgenerator.py`, etc.) contain numerous test functions to ensure the correctness of each component&#x27;s functionality.</p>
<hr/>
<h2>Modules</h2>
<ul style="list-style-type: none; padding-left: 0;">
<li style="margin-bottom: 1em;"><a href="cache.html">cache</a><br/><small>A simple on-disk cache for LLM responses. Implements methods to get and set values using a deterministic key based on file path and content. Persists the cache to disk as a JSON file.</small></li>
<li style="margin-bottom: 1em;"><a href="docgenerator.html">docgenerator</a><br/><small>This module implements a command-line interface for generating documentation using DocGen-LM. It scans a source tree for Python and MATLAB files, parses them, requests summaries from a running LLM, and writes HTML documentation. The module includes functions for cleaning the output directory, summarizing text, tokenizing, chunking text, summarizing modules, rewriting docstrings, and recursively summarizing classes and methods.

The `main` function generates HTML documentation using a local language model (LLM). It takes command-line arguments to specify the source directory, output directory, and various options like ignored paths, LLM URL, model name, and maximum context tokens. The function uses an argument parser to handle these inputs.

It initializes an LLM client and checks if the client is reachable. If not, it prints an error message and returns a non-zero exit code.

The function then sets up a tokenizer and calculates chunk token budgets based on the maximum context tokens. It creates the output directory and copies static files into it.

Using the `scan_directory` function, it processes each file in the source directory. For each file, it reads its content and parses it as Python or MATLAB code. If parsing fails due to syntax errors, it skips the file.

For each parsed module, it generates a summary using the LLM client and caches the results. It also handles classes and functions within the modules, summarizing them recursively and updating their docstrings with project context.

Finally, it writes an index page and individual pages for each module in the output directory.</small></li>
<li style="margin-bottom: 1em;"><a href="html_writer.html">html_writer</a><br/><small>This module provides utilities for rendering documentation pages using simple template substitution. It includes functions to highlight code snippets in various programming languages and to render HTML content based on project summaries and page links. The module also supports generating documentation pages for individual modules, including classes and functions with nested subfunctions and subclasses.</small></li>
<li style="margin-bottom: 1em;"><a href="llm_client.html">llm_client</a><br/><small>This module provides an interface to a local language model (LLM) backend using the LMStudio HTTP API. It includes:

- A `SYSTEM_PROMPT` for the documentation engine.
- `_COMMON_RULES` defining guidelines for generating summaries.
- A `README_PROMPT` for enriching project documentation.
- `PROMPT_TEMPLATES` for different types of code elements (module, class, function, README, project).
- A `sanitize_summary` function to clean up generated summaries.
- An `LLMClient` class with methods:
- `ping`: Checks if the LMStudio API is reachable.
- `summarize`: Generates a summary for given text using a specified prompt type.</small></li>
<li style="margin-bottom: 1em;"><a href="parser_matlab.html">parser_matlab</a><br/><small>Parses MATLAB `.m` files to extract file header comments and function declarations. Returns a dictionary with the file header as a string and a list of dictionaries for each function, containing the function name and its arguments.</small></li>
<li style="margin-bottom: 1em;"><a href="parser_python.html">parser_python</a><br/><small>This Python module provides a parser for Python files used by DocGen-LM. It uses the `ast` module to extract structured information from Python code according to the Software Requirements Specification (SRS). The module includes functions to format function signatures, parse classes and functions, and parse entire Python source files into structured dictionaries.</small></li>
<li style="margin-bottom: 1em;"><a href="reviewer.html">reviewer</a><br/><small>This module provides a tool to review HTML documentation generated by DocGen-LM. It includes functions to check for assistant-like phrases, contradictions, and hallucinations in the HTML content. The `review_directory` function processes all `.html` files within a specified directory, applying these checks and optionally fixing issues by sanitizing paragraphs using `sanitize_summary`. The tool can be run from the command line with arguments specifying the directory path and an optional flag to enable autofixing of detected issues.</small></li>
<li style="margin-bottom: 1em;"><a href="scanner.html">scanner</a><br/><small>The module implements a function to recursively discover Python (``.py``) and Objective-C (``.m``) source files within a specified directory. It includes an ignore mechanism based on relative paths provided by the user. The function filters out directories named `.git` and any paths listed in the ignore list, ensuring that only relevant source files are returned as absolute paths.</small></li>
<li style="margin-bottom: 1em;"><a href="test_cache.html">test_cache</a><br/><small>The module defines two functions for testing a response cache implementation. The first function, `test_cache_round_trip`, tests setting and retrieving an item from the cache. It creates a temporary cache file, sets a key-value pair in the cache, and then retrieves it to ensure the value is correct.

The second function, `test_cache_get_missing`, tests retrieving a non-existent item from the cache. It creates a new cache instance with a temporary file and attempts to retrieve an item using a non-existent key, expecting `None` as the result.</small></li>
<li style="margin-bottom: 1em;"><a href="test_docgenerator.html">test_docgenerator</a><br/><small>This module contains unit tests for a documentation generation tool. It uses the `unittest.mock` library to patch dependencies and the `pathlib` library to handle file paths. The tests cover various scenarios, including:

1. Skipping invalid Python files due to syntax errors.
2. Generating summaries for classes and functions with valid Python code.
3. Handling non-UTF8 encoded files.
4. Summarizing classes without docstrings.
5. Sanitizing project summaries.
6. Using README content as a summary.
7. Cleaning the output directory before generating new documentation.
8. Summarizing text in chunks to handle long inputs.
9. Ensuring methods within classes are summarized individually.
10. Handling subclasses and their methods.

The tests interact with an `LLMClient` mock object to simulate responses from a language model used for summarization, and they verify the correctness of the output by checking file existence and content.</small></li>
<li style="margin-bottom: 1em;"><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a><br/><small>This module defines a test function `test_subclass_docs_and_method_summary` that uses the `unittest.mock.patch` decorator to mock an `LLMClient`. The function creates a temporary project directory with a Python module containing a nested class and a method. It then calls the `main` function from the `docgenerator` module, passing the path to the project directory and specifying an output directory for documentation. The test asserts that the return value of `main` is 0, indicating success. Additionally, it checks that the generated HTML documentation contains summaries for the nested class and its method.</small></li>
<li style="margin-bottom: 1em;"><a href="test_html_writer.html">test_html_writer</a><br/><small>This module contains tests for functions `write_index` and `write_module_page` from the `html_writer.py` file. The tests use `tmp_path` to create temporary files and verify that the output HTML is correctly generated based on the input data. The tests check for specific HTML elements, attributes, and content to ensure that the documentation is rendered as expected.</small></li>
<li style="margin-bottom: 1em;"><a href="test_integration.html">test_integration</a><br/><small>This module contains two tests for a documentation generator. The first test, `test_docgenerator_generates_html`, verifies that the generator can process Python and MATLAB files, create HTML output, and include summaries generated by an LLMClient mock. The second test, `test_static_copied_from_any_cwd`, checks if static files are correctly copied to the output directory regardless of the current working directory.</small></li>
<li style="margin-bottom: 1em;"><a href="test_llm_client.html">test_llm_client</a><br/><small>The module defines a test suite for an `LLMClient` class, which interacts with a language model. It includes tests for the client&#x27;s ability to ping the server, summarize text based on different types (class, function, readme), and handle exceptions during requests. The tests use mocking to simulate HTTP responses and assert the behavior of the client methods under various conditions.</small></li>
<li style="margin-bottom: 1em;"><a href="test_parser_matlab.html">test_parser_matlab</a><br/><small>The module defines two test functions to verify the functionality of a MATLAB file parser. The `test_parse_simple_matlab` function checks if the parser correctly extracts the header and a single function from a simple MATLAB file. The `test_parse_multiple_functions` function tests the parser&#x27;s ability to handle multiple functions within a single MATLAB file, ensuring that each function is correctly identified and its arguments are accurately parsed.</small></li>
<li style="margin-bottom: 1em;"><a href="test_parser_python.html">test_parser_python</a><br/><small>The module defines several test functions to verify the functionality of a `parse_python_file` function from the `parser_python` module. Each test function creates a Python source file with different structures (simple module, complex signature, nested classes, deeply nested classes, and class inside method) using `textwrap.dedent`. It then parses the source file using `parse_python_file` and asserts that the parsed result matches the expected structure and content of the source code.</small></li>
<li style="margin-bottom: 1em;"><a href="test_reviewer.html">test_reviewer</a><br/><small>This module defines functions to test the detection of assistant phrasing, contradictions, and hallucinations in Python modules. It uses a temporary directory to create mock module pages and then runs a `main` function from the `reviewer` module on these pages. The tests check for specific phrases like &quot;[ASSISTANT]&quot;, &quot;[CONTRADICTION]&quot;, and &quot;[HALLUCINATION]&quot; in the output, as well as verify that autofix removes certain phrasing from the HTML files.</small></li>
<li style="margin-bottom: 1em;"><a href="test_scanner.html">test_scanner</a><br/><small>The module defines a test suite for the `scan_directory` function from the `scanner` module. It includes three tests:

1. `test_scan_directory_ignore_folder`: Verifies that directories specified in the ignore list are excluded from the scan results.
2. `test_scan_directory_mixed_file_types`: Ensures that files of various types (Python, Objective-C, text) are included in the scan results when no specific filters are applied.
3. `test_scan_directory_skips_git_folder`: Confirms that the `.git` directory and its contents are not included in the scan results.

Each test creates a temporary directory with predefined files and directories, calls `scan_directory`, and asserts that the returned set of file paths matches the expected outcome based on the test case.</small></li>
</ul>
    </div>
</body>
</html>
