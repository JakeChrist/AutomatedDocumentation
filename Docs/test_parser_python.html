<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test_parser_python</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul>
        <li><a href="index.html"><strong>üè† Project Overview</strong></a></li>
<li><a href="cache.html">cache</a></li>
<li><a href="docgenerator.html">docgenerator</a></li>
<li><a href="html_writer.html">html_writer</a></li>
<li><a href="llm_client.html">llm_client</a></li>
<li><a href="parser_matlab.html">parser_matlab</a></li>
<li><a href="parser_python.html">parser_python</a></li>
<li><a href="reviewer.html">reviewer</a></li>
<li><a href="scanner.html">scanner</a></li>
<li><a href="test_cache.html">test_cache</a></li>
<li><a href="test_docgenerator.html">test_docgenerator</a></li>
<li><a href="test_html_writer.html">test_html_writer</a></li>
<li><a href="test_integration.html">test_integration</a></li>
<li><a href="test_llm_client.html">test_llm_client</a></li>
<li><a href="test_parser_matlab.html">test_parser_matlab</a></li>
<li><a href="test_parser_python.html">test_parser_python</a></li>
<li><a href="test_reviewer.html">test_reviewer</a></li>
<li><a href="test_scanner.html">test_scanner</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>test_parser_python</h1>
        <p>This module contains tests for parsing Python files using a custom `parse_python_file` function. It includes two test functions:

1. `test_parse_simple_module`: Tests parsing a simple Python module with a class and a function, verifying the extracted docstrings, signatures, and source code.

2. `test_parse_complex_signature`: Tests parsing a function with complex signature parameters, ensuring the correct handling of positional-only arguments (`/`), keyword-only arguments (`*`), default values, and variable-length keyword arguments (`**kw`).</p>
<h2>Functions</h2>
<h3 id="test_parse_simple_module">test_parse_simple_module(tmp_path: Path) -&gt; None</h3>
<p>This function `test_parse_simple_module` tests the parsing of a simple Python module. It creates a temporary file with sample Python code, then uses the `parse_python_file` function to parse this file. The test checks that the parsed results include the correct module docstring, class name and docstring, method signature and docstring, function signature and returns information, as well as snippets of the source code for verification.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_parse_simple_module</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    src <span style="color: #666666">=</span> textwrap<span style="color: #666666">.</span>dedent(
<span style="color: #bbbbbb">        </span><span style="color: #BA2121; font-style: italic">&#39;&#39;&#39;</span>
<span style="color: #BA2121; font-style: italic">        &quot;&quot;&quot;Example module.&quot;&quot;&quot;</span>

<span style="color: #BA2121; font-style: italic">        def add(x: int, y: int) -&gt; int:</span>
<span style="color: #BA2121; font-style: italic">            &quot;&quot;&quot;Add two numbers.&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">            return x + y</span>

<span style="color: #BA2121; font-style: italic">        class Greeter:</span>
<span style="color: #BA2121; font-style: italic">            &quot;&quot;&quot;Says hi.&quot;&quot;&quot;</span>

<span style="color: #BA2121; font-style: italic">            def greet(self, name: str = &quot;World&quot;) -&gt; str:</span>
<span style="color: #BA2121; font-style: italic">                &quot;&quot;&quot;Return a greeting.&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">                return f&quot;Hello, {name}&quot;</span>
<span style="color: #BA2121; font-style: italic">        &#39;&#39;&#39;</span>
    )
    file <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;sample.py&quot;</span>
    file<span style="color: #666666">.</span>write_text(src)

    result <span style="color: #666666">=</span> parse_python_file(<span style="color: #008000">str</span>(file))

    <span style="color: #008000; font-weight: bold">assert</span> result[<span style="color: #BA2121">&quot;module_docstring&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Example module.&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(result[<span style="color: #BA2121">&quot;classes&quot;</span>]) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
    <span style="color: #008000">cls</span> <span style="color: #666666">=</span> result[<span style="color: #BA2121">&quot;classes&quot;</span>][<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">cls</span>[<span style="color: #BA2121">&quot;name&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Greeter&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">cls</span>[<span style="color: #BA2121">&quot;docstring&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Says hi.&quot;</span>
    method <span style="color: #666666">=</span> <span style="color: #008000">cls</span>[<span style="color: #BA2121">&quot;methods&quot;</span>][<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">assert</span> method[<span style="color: #BA2121">&quot;signature&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;greet(self, name: str=&#39;World&#39;) -&gt; str&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> method[<span style="color: #BA2121">&quot;docstring&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Return a greeting.&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;def greet&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> method[<span style="color: #BA2121">&quot;source&quot;</span>]
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Return a greeting.&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> method[<span style="color: #BA2121">&quot;source&quot;</span>]

    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(result[<span style="color: #BA2121">&quot;functions&quot;</span>]) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
    func <span style="color: #666666">=</span> result[<span style="color: #BA2121">&quot;functions&quot;</span>][<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">assert</span> func[<span style="color: #BA2121">&quot;name&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;add&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> func[<span style="color: #BA2121">&quot;signature&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;add(x: int, y: int) -&gt; int&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> func[<span style="color: #BA2121">&quot;returns&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;int&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> func[<span style="color: #BA2121">&quot;docstring&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Add two numbers.&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;def add&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> func[<span style="color: #BA2121">&quot;source&quot;</span>]
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Add two numbers.&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> func[<span style="color: #BA2121">&quot;source&quot;</span>]
</code></pre>
<h3 id="test_parse_complex_signature">test_parse_complex_signature(tmp_path: Path) -&gt; None</h3>
<p>The `test_parse_complex_signature` function tests the parsing of a Python file containing a complex function signature. It creates a temporary Python file with the specified content, parses it using the `parse_python_file` function, and then checks if the parsed signature, docstring, and source code are correctly extracted. The test asserts that the function signature matches the expected format, the docstring is accurately captured, and the docstring is present in the original source code.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_parse_complex_signature</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    src <span style="color: #666666">=</span> textwrap<span style="color: #666666">.</span>dedent(
<span style="color: #bbbbbb">        </span><span style="color: #BA2121; font-style: italic">&#39;&#39;&#39;</span>
<span style="color: #BA2121; font-style: italic">        &quot;&quot;&quot;Docstring.&quot;&quot;&quot;</span>

<span style="color: #BA2121; font-style: italic">        def complex(a, /, b, *, c: int = 1, **kw) -&gt; None:</span>
<span style="color: #BA2121; font-style: italic">            &quot;&quot;&quot;Complex function.&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">            pass</span>
<span style="color: #BA2121; font-style: italic">        &#39;&#39;&#39;</span>
    )
    file <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;sample.py&quot;</span>
    file<span style="color: #666666">.</span>write_text(src)

    result <span style="color: #666666">=</span> parse_python_file(<span style="color: #008000">str</span>(file))

    sig <span style="color: #666666">=</span> result[<span style="color: #BA2121">&quot;functions&quot;</span>][<span style="color: #666666">0</span>][<span style="color: #BA2121">&quot;signature&quot;</span>]
    func <span style="color: #666666">=</span> result[<span style="color: #BA2121">&quot;functions&quot;</span>][<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">assert</span> sig <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;complex(a/, b, *, c: int=1, **kw) -&gt; None&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> func[<span style="color: #BA2121">&quot;docstring&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Complex function.&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Complex function.&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> func[<span style="color: #BA2121">&quot;source&quot;</span>]
</code></pre>
    </div>
</body>
</html>
