<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test_html_writer</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul>
        <li><a href="index.html"><strong>üè† Project Overview</strong></a></li>
<li><a href="cache.html">cache</a></li>
<li><a href="docgenerator.html">docgenerator</a></li>
<li><a href="html_writer.html">html_writer</a></li>
<li><a href="llm_client.html">llm_client</a></li>
<li><a href="parser_matlab.html">parser_matlab</a></li>
<li><a href="parser_python.html">parser_python</a></li>
<li><a href="reviewer.html">reviewer</a></li>
<li><a href="scanner.html">scanner</a></li>
<li><a href="test_cache.html">test_cache</a></li>
<li><a href="test_docgenerator.html">test_docgenerator</a></li>
<li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li>
<li><a href="test_html_writer.html">test_html_writer</a></li>
<li><a href="test_integration.html">test_integration</a></li>
<li><a href="test_llm_client.html">test_llm_client</a></li>
<li><a href="test_parser_matlab.html">test_parser_matlab</a></li>
<li><a href="test_parser_python.html">test_parser_python</a></li>
<li><a href="test_reviewer.html">test_reviewer</a></li>
<li><a href="test_scanner.html">test_scanner</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>test_html_writer</h1>
        <p>This module contains tests for functions `write_index` and `write_module_page` from the `html_writer.py` file. The tests use `tmp_path` to create temporary files and verify that the output HTML is correctly generated based on the input data. The tests check for specific HTML elements, attributes, and content to ensure that the documentation is rendered as expected.</p>
<h2>Functions</h2>
<h3 id="test_write_index">test_write_index(tmp_path: Path) -&gt; None</h3>
<p>The `test_write_index` function tests the `write_index` function from the `html_writer.py` module. It creates a temporary directory, defines links and summaries for modules, and calls `write_index` to generate an HTML index file. The test checks that the generated HTML contains expected elements such as the generation comment, project summary, module links, and summaries. It ensures that special characters in module names are correctly escaped and that only one summary is rendered.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_write_index</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    links <span style="color: #666666">=</span> [(<span style="color: #BA2121">&quot;module&lt;1&gt;&quot;</span>, <span style="color: #BA2121">&quot;module1.html&quot;</span>), (<span style="color: #BA2121">&quot;module&amp;2&quot;</span>, <span style="color: #BA2121">&quot;module2.html&quot;</span>)]
    summaries <span style="color: #666666">=</span> {<span style="color: #BA2121">&quot;module&lt;1&gt;&quot;</span>: <span style="color: #BA2121">&quot;First module.&quot;</span>, <span style="color: #BA2121">&quot;module&amp;2&quot;</span>: <span style="color: #BA2121">&quot;&quot;</span>}
    write_index(<span style="color: #008000">str</span>(tmp_path), <span style="color: #BA2121">&quot;Project &lt;summary&gt; &amp; data&quot;</span>, links, summaries)
    html <span style="color: #666666">=</span> (tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;index.html&quot;</span>)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>splitlines()[<span style="color: #666666">0</span>]<span style="color: #666666">.</span>strip() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;&lt;!-- Generated by DocGen-LM --&gt;&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Project &amp;lt;summary&amp;gt; &amp;amp; data&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;module1.html&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">2</span>
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;module2.html&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">2</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;module&amp;lt;1&amp;gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;module&amp;amp;2&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;h2&gt;Modules&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;ul&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;small&gt;First module.&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #3D7B7B; font-style: italic"># only one summary should be rendered</span>
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;&lt;small&gt;&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;h1&gt;Project Documentation&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
</code></pre>
<h3 id="test_write_module_page">test_write_module_page(tmp_path: Path) -&gt; None</h3>
<p>The `test_write_module_page` function tests the `write_module_page` function from the `html_writer.py` module. It creates a temporary directory, simulates module data including classes and functions, and writes an HTML module page using this data. The test checks that the generated HTML contains expected elements such as project overview link, module summary, class details, method signatures, and function definitions. It also verifies that code snippets are correctly highlighted in `&lt;pre&gt;&lt;code&gt;` tags.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_write_module_page</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    links <span style="color: #666666">=</span> [(<span style="color: #BA2121">&quot;OtherModule&quot;</span>, <span style="color: #BA2121">&quot;other.html&quot;</span>)]
    module_data <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;module1&quot;</span>,
        <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;Module &lt;summary&gt;&quot;</span>,
        <span style="color: #BA2121">&quot;classes&quot;</span>: [
            {
                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;Bar&quot;</span>,
                <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;Class &lt;summary&gt;&quot;</span>,
                <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;Bar docs &amp; stuff&quot;</span>,
                <span style="color: #BA2121">&quot;methods&quot;</span>: [
                    {
                        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;baz&quot;</span>,
                        <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def baz(self): pass&quot;</span>,
                        <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;Baz &lt;docs&gt;&quot;</span>,
                        <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def baz(self):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    pass&quot;</span>,
                    }
                ],
            }
        ],
        <span style="color: #BA2121">&quot;functions&quot;</span>: [
            {
                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;foo&quot;</span>,
                <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def foo(): pass&quot;</span>,
                <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;Func summary &amp; stuff&quot;</span>,
                <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;Foo docs&quot;</span>,
                <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def foo():</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    pass&quot;</span>,
            }
        ],
    }
    write_module_page(<span style="color: #008000">str</span>(tmp_path), module_data, links)
    html <span style="color: #666666">=</span> (tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;module1.html&quot;</span>)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>splitlines()[<span style="color: #666666">0</span>]<span style="color: #666666">.</span>strip() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;&lt;!-- Generated by DocGen-LM --&gt;&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&#39;&lt;a href=&quot;index.html&quot;&gt;&lt;strong&gt;üè† Project Overview&lt;/strong&gt;&lt;/a&gt;&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&#39;other.html&#39;</span>) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Module &amp;lt;summary&amp;gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;h2 id=</span><span style="color: #AA5D1F; font-weight: bold">\&quot;</span><span style="color: #BA2121">Bar</span><span style="color: #AA5D1F; font-weight: bold">\&quot;</span><span style="color: #BA2121">&gt;Class: Bar&lt;/h2&gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Bar docs &amp;amp; stuff&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Method: def baz(self): pass&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Baz &amp;lt;docs&amp;gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Func summary &amp;amp; stuff&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;h2&gt;Functions&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;def foo(): pass&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;&lt;pre&gt;&lt;code&gt;&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">2</span>
</code></pre>
<h3 id="test_subfunction_rendering">test_subfunction_rendering(tmp_path: Path) -&gt; None</h3>
<p>The function `test_subfunction_rendering` tests the rendering of subfunctions in HTML documentation. It creates a mock module data structure with an outer function containing a nested inner function. The function then writes this module page to a temporary directory using the `write_module_page` function and reads the generated HTML file. It asserts that the HTML contains details tags, references to the inner subfunction, and that both the outer and inner functions&#x27; source code are highlighted in `&lt;pre&gt;&lt;code&gt;` blocks.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_subfunction_rendering</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    links <span style="color: #666666">=</span> []
    module_data <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;mod&quot;</span>,
        <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;&quot;</span>,
        <span style="color: #BA2121">&quot;classes&quot;</span>: [],
        <span style="color: #BA2121">&quot;functions&quot;</span>: [
            {
                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;outer&quot;</span>,
                <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def outer(x)&quot;</span>,
                <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def outer(x):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    def inner(y):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">        pass</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    return inner(x)&quot;</span>,
                <span style="color: #BA2121">&quot;subfunctions&quot;</span>: [
                    {
                        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;inner&quot;</span>,
                        <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def inner(y)&quot;</span>,
                        <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;Inner docs&quot;</span>,
                        <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def inner(y):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    pass&quot;</span>,
                        <span style="color: #BA2121">&quot;subfunctions&quot;</span>: [],
                    }
                ],
            }
        ],
    }
    write_module_page(<span style="color: #008000">str</span>(tmp_path), module_data, links)
    html <span style="color: #666666">=</span> (tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;mod.html&quot;</span>)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;details&gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Subfunction: def inner(y)&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #3D7B7B; font-style: italic"># outer and inner source should both be highlighted</span>
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;&lt;pre&gt;&lt;code&gt;&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">2</span>
</code></pre>
<h3 id="test_subclass_rendering">test_subclass_rendering(tmp_path: Path) -&gt; None</h3>
<p>The function `test_subclass_rendering` tests the rendering of subclass information in HTML documentation. It creates a mock module data structure with a class `A` that has a subclass `B`. The function writes this module data to an HTML file using the `write_module_page` function and then reads the generated HTML content. It asserts that the HTML contains details tags, mentions &quot;Class: B&quot;, includes the method signature &quot;def m(self)&quot;, and highlights one code snippet.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_subclass_rendering</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    links <span style="color: #666666">=</span> []
    module_data <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;mod&quot;</span>,
        <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;&quot;</span>,
        <span style="color: #BA2121">&quot;functions&quot;</span>: [],
        <span style="color: #BA2121">&quot;classes&quot;</span>: [
            {
                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;A&quot;</span>,
                <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;&quot;</span>,
                <span style="color: #BA2121">&quot;methods&quot;</span>: [],
                <span style="color: #BA2121">&quot;subclasses&quot;</span>: [
                    {
                        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;B&quot;</span>,
                        <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;B docs&quot;</span>,
                        <span style="color: #BA2121">&quot;methods&quot;</span>: [
                            {
                                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;m&quot;</span>,
                                <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def m(self)&quot;</span>,
                                <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def m(self):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    pass&quot;</span>,
                                <span style="color: #BA2121">&quot;subfunctions&quot;</span>: [],
                            }
                        ],
                        <span style="color: #BA2121">&quot;subclasses&quot;</span>: [],
                    }
                ],
            }
        ],
    }
    write_module_page(<span style="color: #008000">str</span>(tmp_path), module_data, links)
    html <span style="color: #666666">=</span> (tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;mod.html&quot;</span>)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;details&gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Class: B&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;def m(self)&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;&lt;pre&gt;&lt;code&gt;&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
</code></pre>
    </div>
</body>
</html>
