<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test_html_writer</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul>
        <li><a href="index.html"><strong>üè† Project Overview</strong></a></li>
<li><a href="cache.html">cache</a></li>
<li><a href="chunk_utils.html">chunk_utils</a></li>
<li><a href="docgenerator.html">docgenerator</a></li>
<li><a href="explaincode.html">explaincode</a></li>
<li><a href="gui_wrapper.html">gui_wrapper</a></li>
<li><a href="html_writer.html">html_writer</a></li>
<li><a href="llm_client.html">llm_client</a></li>
<li><a href="manual_utils.html">manual_utils</a></li>
<li><a href="parser_matlab.html">parser_matlab</a></li>
<li><a href="parser_python.html">parser_python</a></li>
<li><a href="reviewer.html">reviewer</a></li>
<li><a href="scanner.html">scanner</a></li>
<li><a href="setup.html">setup</a></li>
<li><a href="summarize_utils.html">summarize_utils</a></li>
<li><a href="test_cache.html">test_cache</a></li>
<li><a href="test_chunk_utils.html">test_chunk_utils</a></li>
<li><a href="test_docgenerator.html">test_docgenerator</a></li>
<li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li>
<li><a href="test_explaincode.html">test_explaincode</a></li>
<li><a href="test_html_writer.html">test_html_writer</a></li>
<li><a href="test_integration.html">test_integration</a></li>
<li><a href="test_llm_client.html">test_llm_client</a></li>
<li><a href="test_manual_utils.html">test_manual_utils</a></li>
<li><a href="test_parser_matlab.html">test_parser_matlab</a></li>
<li><a href="test_parser_python.html">test_parser_python</a></li>
<li><a href="test_reviewer.html">test_reviewer</a></li>
<li><a href="test_scanner.html">test_scanner</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>test_html_writer</h1>
        <p>The module defines functions to generate HTML documentation for projects and modules. It includes tests to ensure the HTML output is correct, covering various cases such as rendering summaries, classes, methods, functions, subfunctions, and subclasses in a structured format.</p>
<h2>Functions</h2>
<h3 id="test_write_index">test_write_index(tmp_path: Path) -&gt; None</h3>
<p>The function `test_write_index` is designed to test the functionality of writing an index file for project documentation. It takes a temporary path as input and creates an HTML index file with specified links and summaries. The function asserts that the generated HTML contains specific elements such as the generator comment, project summary, module links, and summaries. It also checks that only one summary is rendered in the HTML output.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_write_index</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    links <span style="color: #666666">=</span> [(<span style="color: #BA2121">&quot;module&lt;1&gt;&quot;</span>, <span style="color: #BA2121">&quot;module1.html&quot;</span>), (<span style="color: #BA2121">&quot;module&amp;2&quot;</span>, <span style="color: #BA2121">&quot;module2.html&quot;</span>)]
    summaries <span style="color: #666666">=</span> {<span style="color: #BA2121">&quot;module&lt;1&gt;&quot;</span>: <span style="color: #BA2121">&quot;First module.&quot;</span>, <span style="color: #BA2121">&quot;module&amp;2&quot;</span>: <span style="color: #BA2121">&quot;&quot;</span>}
    write_index(<span style="color: #008000">str</span>(tmp_path), <span style="color: #BA2121">&quot;Project &lt;summary&gt; &amp; data&quot;</span>, links, summaries)
    html <span style="color: #666666">=</span> (tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;index.html&quot;</span>)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>splitlines()[<span style="color: #666666">0</span>]<span style="color: #666666">.</span>strip() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;&lt;!-- Generated by DocGen-LM --&gt;&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Project &amp;lt;summary&amp;gt; &amp;amp; data&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;module1.html&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">2</span>
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;module2.html&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">2</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;module&amp;lt;1&amp;gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;module&amp;amp;2&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;h2&gt;Modules&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;ul&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;small&gt;First module.&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #3D7B7B; font-style: italic"># only one summary should be rendered</span>
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;&lt;small&gt;&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;h1&gt;Project Documentation&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
</code></pre>
<h3 id="test_write_module_page">test_write_module_page(tmp_path: Path) -&gt; None</h3>
<p>The function `test_write_module_page` is designed to test the generation of a module page for documentation. It takes a temporary path as input and creates a mock module data dictionary with details about classes, functions, and their summaries and docstrings. The function then calls `write_module_page` with this data to generate an HTML file in the specified temporary path.

The test checks that the generated HTML file contains specific elements such as a project overview link, links to other modules, class and method summaries, and code snippets. It also verifies that the HTML is correctly formatted and includes the expected content from the module data.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_write_module_page</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    links <span style="color: #666666">=</span> [(<span style="color: #BA2121">&quot;OtherModule&quot;</span>, <span style="color: #BA2121">&quot;other.html&quot;</span>)]
    module_data <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;module1&quot;</span>,
        <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;Module &lt;summary&gt;&quot;</span>,
        <span style="color: #BA2121">&quot;classes&quot;</span>: [
            {
                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;Bar&quot;</span>,
                <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;Class &lt;summary&gt;&quot;</span>,
                <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;Bar docs &amp; stuff&quot;</span>,
                <span style="color: #BA2121">&quot;methods&quot;</span>: [
                    {
                        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;baz&quot;</span>,
                        <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def baz(self): pass&quot;</span>,
                        <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;Baz &lt;docs&gt;&quot;</span>,
                        <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def baz(self):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    pass&quot;</span>,
                    }
                ],
            }
        ],
        <span style="color: #BA2121">&quot;functions&quot;</span>: [
            {
                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;foo&quot;</span>,
                <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def foo(): pass&quot;</span>,
                <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;Func summary &amp; stuff&quot;</span>,
                <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;Foo docs&quot;</span>,
                <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def foo():</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    pass&quot;</span>,
            }
        ],
    }
    write_module_page(<span style="color: #008000">str</span>(tmp_path), module_data, links)
    html <span style="color: #666666">=</span> (tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;module1.html&quot;</span>)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>splitlines()[<span style="color: #666666">0</span>]<span style="color: #666666">.</span>strip() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;&lt;!-- Generated by DocGen-LM --&gt;&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&#39;&lt;a href=&quot;index.html&quot;&gt;&lt;strong&gt;üè† Project Overview&lt;/strong&gt;&lt;/a&gt;&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&#39;other.html&#39;</span>) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Module &amp;lt;summary&amp;gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;h2 id=</span><span style="color: #AA5D1F; font-weight: bold">\&quot;</span><span style="color: #BA2121">Bar</span><span style="color: #AA5D1F; font-weight: bold">\&quot;</span><span style="color: #BA2121">&gt;Class: Bar&lt;/h2&gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Bar docs &amp;amp; stuff&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Method: def baz(self): pass&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Baz &amp;lt;docs&amp;gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Func summary &amp;amp; stuff&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;h2&gt;Functions&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;def foo(): pass&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;&lt;pre&gt;&lt;code&gt;&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">2</span>
</code></pre>
<h3 id="test_subfunction_rendering">test_subfunction_rendering(tmp_path: Path) -&gt; None</h3>
<p>The function `test_subfunction_rendering` is designed to test the rendering of subfunctions within a module&#x27;s documentation. It takes a temporary path as an argument, which is used for generating and storing the HTML output.

The function creates a mock module data dictionary that includes a nested structure with an outer function and an inner subfunction. It then calls `write_module_page` with this mock data and the temporary path to generate the HTML documentation.

After generating the HTML, the function reads the content of the generated `mod.html` file and asserts that certain elements are present in the HTML output:
- The presence of `&lt;details&gt;` tags indicates that the subfunction is rendered as an expandable section.
- The text &quot;Subfunction: def inner(y)&quot; confirms that the subfunction&#x27;s name is correctly displayed.
- The count of `&lt;pre&gt;&lt;code&gt;` tags being two suggests that both the outer and inner functions&#x27; source code are highlighted in the HTML output, indicating proper syntax highlighting.

This test ensures that the documentation generation process correctly handles nested function structures and renders them appropriately in the final HTML output.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_subfunction_rendering</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    links <span style="color: #666666">=</span> []
    module_data <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;mod&quot;</span>,
        <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;&quot;</span>,
        <span style="color: #BA2121">&quot;classes&quot;</span>: [],
        <span style="color: #BA2121">&quot;functions&quot;</span>: [
            {
                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;outer&quot;</span>,
                <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def outer(x)&quot;</span>,
                <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def outer(x):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    def inner(y):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">        pass</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    return inner(x)&quot;</span>,
                <span style="color: #BA2121">&quot;subfunctions&quot;</span>: [
                    {
                        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;inner&quot;</span>,
                        <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def inner(y)&quot;</span>,
                        <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;Inner docs&quot;</span>,
                        <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def inner(y):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    pass&quot;</span>,
                        <span style="color: #BA2121">&quot;subfunctions&quot;</span>: [],
                    }
                ],
            }
        ],
    }
    write_module_page(<span style="color: #008000">str</span>(tmp_path), module_data, links)
    html <span style="color: #666666">=</span> (tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;mod.html&quot;</span>)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;details&gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Subfunction: def inner(y)&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #3D7B7B; font-style: italic"># outer and inner source should both be highlighted</span>
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;&lt;pre&gt;&lt;code&gt;&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">2</span>
</code></pre>
<h3 id="test_subclass_rendering">test_subclass_rendering(tmp_path: Path) -&gt; None</h3>
<p>This function, `test_subclass_rendering`, is designed to test the rendering of subclass information in HTML documentation. It uses a temporary directory (`tmp_path`) to create a mock module data structure representing a Python class hierarchy with nested subclasses and methods. The function then calls `write_module_page` to generate an HTML file for this module, which includes details about the classes and their methods.

The test checks that the generated HTML contains specific elements:
- It verifies that `&lt;details&gt;` tags are present, indicating expandable sections in the documentation.
- It confirms that the class &quot;B&quot; is included in the HTML output.
- It ensures that the method `m` within subclass &quot;B&quot; is correctly represented.
- Finally, it checks that exactly one `&lt;pre&gt;&lt;code&gt;` tag is present, which likely contains the source code of the method.

This function serves as a unit test to ensure that the documentation generation process correctly handles and displays subclass relationships in Python projects.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_subclass_rendering</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    links <span style="color: #666666">=</span> []
    module_data <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;mod&quot;</span>,
        <span style="color: #BA2121">&quot;summary&quot;</span>: <span style="color: #BA2121">&quot;&quot;</span>,
        <span style="color: #BA2121">&quot;functions&quot;</span>: [],
        <span style="color: #BA2121">&quot;classes&quot;</span>: [
            {
                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;A&quot;</span>,
                <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;&quot;</span>,
                <span style="color: #BA2121">&quot;methods&quot;</span>: [],
                <span style="color: #BA2121">&quot;subclasses&quot;</span>: [
                    {
                        <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;B&quot;</span>,
                        <span style="color: #BA2121">&quot;docstring&quot;</span>: <span style="color: #BA2121">&quot;B docs&quot;</span>,
                        <span style="color: #BA2121">&quot;methods&quot;</span>: [
                            {
                                <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;m&quot;</span>,
                                <span style="color: #BA2121">&quot;signature&quot;</span>: <span style="color: #BA2121">&quot;def m(self)&quot;</span>,
                                <span style="color: #BA2121">&quot;source&quot;</span>: <span style="color: #BA2121">&quot;def m(self):</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    pass&quot;</span>,
                                <span style="color: #BA2121">&quot;subfunctions&quot;</span>: [],
                            }
                        ],
                        <span style="color: #BA2121">&quot;subclasses&quot;</span>: [],
                    }
                ],
            }
        ],
    }
    write_module_page(<span style="color: #008000">str</span>(tmp_path), module_data, links)
    html <span style="color: #666666">=</span> (tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;mod.html&quot;</span>)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;&lt;details&gt;&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;Class: B&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">&quot;def m(self)&quot;</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
    <span style="color: #008000; font-weight: bold">assert</span> html<span style="color: #666666">.</span>count(<span style="color: #BA2121">&quot;&lt;pre&gt;&lt;code&gt;&quot;</span>) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
