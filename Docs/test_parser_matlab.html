<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test_parser_matlab</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul>
        <li><a href="index.html"><strong>üè† Project Overview</strong></a></li>
<li><a href="cache.html">cache</a></li>
<li><a href="chunk_utils.html">chunk_utils</a></li>
<li><a href="docgenerator.html">docgenerator</a></li>
<li><a href="explaincode.html">explaincode</a></li>
<li><a href="gui_wrapper.html">gui_wrapper</a></li>
<li><a href="html_writer.html">html_writer</a></li>
<li><a href="llm_client.html">llm_client</a></li>
<li><a href="manual_utils.html">manual_utils</a></li>
<li><a href="parser_cpp.html">parser_cpp</a></li>
<li><a href="parser_java.html">parser_java</a></li>
<li><a href="parser_matlab.html">parser_matlab</a></li>
<li><a href="parser_python.html">parser_python</a></li>
<li><a href="reviewer.html">reviewer</a></li>
<li><a href="scanner.html">scanner</a></li>
<li><a href="setup.html">setup</a></li>
<li><a href="summarize_utils.html">summarize_utils</a></li>
<li><a href="test_cache.html">test_cache</a></li>
<li><a href="test_chunk_utils.html">test_chunk_utils</a></li>
<li><a href="test_docgenerator.html">test_docgenerator</a></li>
<li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li>
<li><a href="test_explaincode.html">test_explaincode</a></li>
<li><a href="test_html_writer.html">test_html_writer</a></li>
<li><a href="test_integration.html">test_integration</a></li>
<li><a href="test_llm_client.html">test_llm_client</a></li>
<li><a href="test_manual_utils.html">test_manual_utils</a></li>
<li><a href="test_parser_cpp.html">test_parser_cpp</a></li>
<li><a href="test_parser_java.html">test_parser_java</a></li>
<li><a href="test_parser_matlab.html">test_parser_matlab</a></li>
<li><a href="test_parser_python.html">test_parser_python</a></li>
<li><a href="test_reviewer.html">test_reviewer</a></li>
<li><a href="test_scanner.html">test_scanner</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>test_parser_matlab</h1>
        <p>This module defines two test functions to verify the functionality of a MATLAB file parser. The `test_parse_simple_matlab` function checks if the parser correctly handles a simple MATLAB file with a single function. It asserts that the header is parsed correctly and that the function details are accurately extracted.

The `test_parse_multiple_functions` function tests the parser&#x27;s ability to handle multiple functions within a single MATLAB file. It verifies that both functions are correctly identified, their names and arguments are accurately captured, and that there are no issues with parsing files containing more than one function.</p>
<h2>Functions</h2>
<h3 id="test_parse_simple_matlab">test_parse_simple_matlab(tmp_path: Path) -&gt; None</h3>
<p>The function `test_parse_simple_matlab` is a unit test for parsing simple MATLAB files. It creates a temporary file with MATLAB code, then calls the `parse_matlab_file` function to parse the file. The test asserts that the parsed header matches the expected content and that there is one function defined in the file. It further checks that the function&#x27;s name, arguments, and body are correctly extracted from the source code.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_parse_simple_matlab</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    src <span style="color: #666666">=</span> textwrap<span style="color: #666666">.</span>dedent(
<span style="color: #bbbbbb">        </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">        % Example MATLAB file</span>
<span style="color: #BA2121; font-style: italic">        % Another line</span>
<span style="color: #BA2121; font-style: italic">        function y = add(x, y)</span>
<span style="color: #BA2121; font-style: italic">            y = x + y;</span>
<span style="color: #BA2121; font-style: italic">        end</span>
<span style="color: #BA2121; font-style: italic">        &quot;&quot;&quot;</span>
    )
    file <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;sample.m&quot;</span>
    file<span style="color: #666666">.</span>write_text(src)

    result <span style="color: #666666">=</span> parse_matlab_file(<span style="color: #008000">str</span>(file))

    <span style="color: #008000; font-weight: bold">assert</span> result[<span style="color: #BA2121">&quot;header&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Example MATLAB file</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">Another line&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(result[<span style="color: #BA2121">&quot;functions&quot;</span>]) <span style="color: #666666">==</span> <span style="color: #666666">1</span>
    func <span style="color: #666666">=</span> result[<span style="color: #BA2121">&quot;functions&quot;</span>][<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">assert</span> func[<span style="color: #BA2121">&quot;name&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;add&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> func[<span style="color: #BA2121">&quot;args&quot;</span>] <span style="color: #666666">==</span> [<span style="color: #BA2121">&quot;x&quot;</span>, <span style="color: #BA2121">&quot;y&quot;</span>]
</code></pre>
<h3 id="test_parse_multiple_functions">test_parse_multiple_functions(tmp_path: Path) -&gt; None</h3>
<p>This function, `test_parse_multiple_functions`, tests the parsing of multiple MATLAB functions from a source file. It creates a temporary file with two MATLAB functions: `compute` and `square`. The function then parses this file using `parse_matlab_file` and asserts that:
1. The header is empty.
2. There are exactly two functions parsed.
3. The names of the parsed functions are &quot;compute&quot; and &quot;square&quot;.
4. The arguments for each function match the expected values: `compute` takes `a` and `b`, while `square` takes `x`.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_parse_multiple_functions</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    src <span style="color: #666666">=</span> textwrap<span style="color: #666666">.</span>dedent(
<span style="color: #bbbbbb">        </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">        function [out1,out2] = compute(a, b)</span>
<span style="color: #BA2121; font-style: italic">            out1 = a + b;</span>
<span style="color: #BA2121; font-style: italic">            out2 = a - b;</span>
<span style="color: #BA2121; font-style: italic">        end</span>

<span style="color: #BA2121; font-style: italic">        function result = square(x)</span>
<span style="color: #BA2121; font-style: italic">            result = x ^ 2;</span>
<span style="color: #BA2121; font-style: italic">        end</span>
<span style="color: #BA2121; font-style: italic">        &quot;&quot;&quot;</span>
    )
    file <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;multi.m&quot;</span>
    file<span style="color: #666666">.</span>write_text(src)

    result <span style="color: #666666">=</span> parse_matlab_file(<span style="color: #008000">str</span>(file))

    <span style="color: #008000; font-weight: bold">assert</span> result[<span style="color: #BA2121">&quot;header&quot;</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(result[<span style="color: #BA2121">&quot;functions&quot;</span>]) <span style="color: #666666">==</span> <span style="color: #666666">2</span>
    names <span style="color: #666666">=</span> [f[<span style="color: #BA2121">&quot;name&quot;</span>] <span style="color: #008000; font-weight: bold">for</span> f <span style="color: #AA22FF; font-weight: bold">in</span> result[<span style="color: #BA2121">&quot;functions&quot;</span>]]
    <span style="color: #008000; font-weight: bold">assert</span> names <span style="color: #666666">==</span> [<span style="color: #BA2121">&quot;compute&quot;</span>, <span style="color: #BA2121">&quot;square&quot;</span>]
    <span style="color: #008000; font-weight: bold">assert</span> result[<span style="color: #BA2121">&quot;functions&quot;</span>][<span style="color: #666666">0</span>][<span style="color: #BA2121">&quot;args&quot;</span>] <span style="color: #666666">==</span> [<span style="color: #BA2121">&quot;a&quot;</span>, <span style="color: #BA2121">&quot;b&quot;</span>]
    <span style="color: #008000; font-weight: bold">assert</span> result[<span style="color: #BA2121">&quot;functions&quot;</span>][<span style="color: #666666">1</span>][<span style="color: #BA2121">&quot;args&quot;</span>] <span style="color: #666666">==</span> [<span style="color: #BA2121">&quot;x&quot;</span>]
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
