<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>html_writer</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><a href="cache.html">cache</a></li><li><a href="chunk_utils.html">chunk_utils</a></li><li><a href="docgenerator.html">docgenerator</a></li><li><a href="explaincode.html">explaincode</a></li><li><a href="gui_wrapper.html">gui_wrapper</a></li><li><a href="html_writer.html">html_writer</a></li><li><a href="llm_client.html">llm_client</a></li><li><a href="manual_utils.html">manual_utils</a></li><li><a href="parser_cpp.html">parser_cpp</a></li><li><a href="parser_java.html">parser_java</a></li><li><a href="parser_matlab.html">parser_matlab</a></li><li><a href="parser_python.html">parser_python</a></li><li><a href="retrofit_sidebar.html">retrofit_sidebar</a></li><li><a href="reviewer.html">reviewer</a></li><li><a href="sanitize_docs.html">sanitize_docs</a></li><li><a href="scanner.html">scanner</a></li><li><a href="setup.html">setup</a></li><li><a href="summarize_utils.html">summarize_utils</a></li><li><details><summary>tests</summary><ul><li><a href="test_cache.html">test_cache</a></li><li><a href="test_chunk_utils.html">test_chunk_utils</a></li><li><a href="test_docgenerator.html">test_docgenerator</a></li><li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li><li><a href="test_explaincode.html">test_explaincode</a></li><li><a href="test_html_writer.html">test_html_writer</a></li><li><a href="test_integration.html">test_integration</a></li><li><a href="test_llm_client.html">test_llm_client</a></li><li><a href="test_manual_utils.html">test_manual_utils</a></li><li><a href="test_parser_cpp.html">test_parser_cpp</a></li><li><a href="test_parser_java.html">test_parser_java</a></li><li><a href="test_parser_matlab.html">test_parser_matlab</a></li><li><a href="test_parser_python.html">test_parser_python</a></li><li><a href="test_resume_progress.html">test_resume_progress</a></li><li><a href="test_retrofit_sidebar.html">test_retrofit_sidebar</a></li><li><a href="test_reviewer.html">test_reviewer</a></li><li><a href="test_sanitize_docs.html">test_sanitize_docs</a></li><li><a href="test_scanner.html">test_scanner</a></li></ul></details></li></ul>
    </div>
    <div class="content">
        <h1>html_writer</h1>
        <p>Module provides HTML rendering utilities for generating documentation pages from structured data. It includes functions to render navigation trees, highlight code snippets using Pygments, and generate complete HTML pages with templates. The module supports rendering project overviews, module pages with classes, functions, and variables, and handles nested structures through recursive rendering functions. It processes data dictionaries containing documentation elements and outputs styled HTML files with proper escaping and formatting.</p>
<h2>Functions</h2>
<h3 id="_render_nav_tree">_render_nav_tree(tree: Dict[str, Any], include_home: bool=False) -&gt; str</h3>
<p>The function `_render_nav_tree` generates HTML code for a nested navigation tree from a dictionary structure. It takes a dictionary `tree` representing the navigation structure and an optional boolean `include_home` to determine whether to include a home link. The function uses a recursive helper `_render` to process nodes, adding links for files and creating collapsible sections for directories. Each directory is rendered as a `&lt;details&gt;` element with a `&lt;summary&gt;` tag, and files are listed as `&lt;li&gt;` elements with hyperlinks. The output is a string containing the complete HTML structure of the navigation tree.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_render_nav_tree</span>(tree: Dict[<span style="color: #008000">str</span>, Any], include_home: <span style="color: #008000">bool</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">False</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return HTML for a nested navigation ``tree``.&quot;&quot;&quot;</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_render</span>(node: Dict[<span style="color: #008000">str</span>, Any], is_root: <span style="color: #008000">bool</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">False</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
        parts: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
        <span style="color: #008000; font-weight: bold">if</span> is_root <span style="color: #AA22FF; font-weight: bold">and</span> include_home:
            parts<span style="color: #666666">.</span>append(
                <span style="color: #BA2121">&#39;&lt;li&gt;&lt;a href=&quot;index.html&quot;&gt;&lt;strong&gt;üè† Project Overview&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;&#39;</span>
            )
        <span style="color: #008000; font-weight: bold">for</span> name, link <span style="color: #AA22FF; font-weight: bold">in</span> node<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;__files__&quot;</span>, []):
            parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;li&gt;&lt;a href=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>link<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(name)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/a&gt;&lt;/li&gt;&#39;</span>)
        <span style="color: #008000; font-weight: bold">for</span> dirname <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">sorted</span>(k <span style="color: #008000; font-weight: bold">for</span> k <span style="color: #AA22FF; font-weight: bold">in</span> node<span style="color: #666666">.</span>keys() <span style="color: #008000; font-weight: bold">if</span> k <span style="color: #666666">!=</span> <span style="color: #BA2121">&quot;__files__&quot;</span>):
            parts<span style="color: #666666">.</span>append(
                <span style="color: #BA2121">&#39;&lt;li&gt;&lt;details&gt;&lt;summary&gt;</span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121">&lt;/summary&gt;</span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121">&lt;/details&gt;&lt;/li&gt;&#39;</span><span style="color: #666666">.</span>format(
                    html<span style="color: #666666">.</span>escape(dirname), _render(node[dirname])
                )
            )
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&quot;&lt;ul&gt;&quot;</span> <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;&quot;</span><span style="color: #666666">.</span>join(parts) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;&lt;/ul&gt;&quot;</span>

    <span style="color: #008000; font-weight: bold">return</span> _render(tree, <span style="color: #008000; font-weight: bold">True</span>)
</code></pre>
<details>
<summary>Subfunction: _render(node: Dict[str, Any], is_root: bool=False) -&gt; str</summary>
<h4 id="_render">_render(node: Dict[str, Any], is_root: bool=False) -&gt; str</h4>
<p>The function `_render` recursively generates an HTML unordered list representing a hierarchical structure of files and directories. It takes a dictionary `node` and a boolean `is_root` to determine if the current node is the root of the structure. If `is_root` is True and `include_home` is True, it adds a link to an index page with the label &quot;üè† Project Overview&quot;. For each file in the `__files__` key of the node, it creates an HTML list item with a hyperlink. For each directory key in the node (excluding `__files__`), it creates a collapsible details element containing a summary of the directory name and recursively processes its contents. The result is a nested HTML structure suitable for displaying project navigation.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_render</span>(node: Dict[<span style="color: #008000">str</span>, Any], is_root: <span style="color: #008000">bool</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">False</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
        parts: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
        <span style="color: #008000; font-weight: bold">if</span> is_root <span style="color: #AA22FF; font-weight: bold">and</span> include_home:
            parts<span style="color: #666666">.</span>append(
                <span style="color: #BA2121">&#39;&lt;li&gt;&lt;a href=&quot;index.html&quot;&gt;&lt;strong&gt;üè† Project Overview&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;&#39;</span>
            )
        <span style="color: #008000; font-weight: bold">for</span> name, link <span style="color: #AA22FF; font-weight: bold">in</span> node<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;__files__&quot;</span>, []):
            parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;li&gt;&lt;a href=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>link<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(name)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/a&gt;&lt;/li&gt;&#39;</span>)
        <span style="color: #008000; font-weight: bold">for</span> dirname <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">sorted</span>(k <span style="color: #008000; font-weight: bold">for</span> k <span style="color: #AA22FF; font-weight: bold">in</span> node<span style="color: #666666">.</span>keys() <span style="color: #008000; font-weight: bold">if</span> k <span style="color: #666666">!=</span> <span style="color: #BA2121">&quot;__files__&quot;</span>):
            parts<span style="color: #666666">.</span>append(
                <span style="color: #BA2121">&#39;&lt;li&gt;&lt;details&gt;&lt;summary&gt;</span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121">&lt;/summary&gt;</span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121">&lt;/details&gt;&lt;/li&gt;&#39;</span><span style="color: #666666">.</span>format(
                    html<span style="color: #666666">.</span>escape(dirname), _render(node[dirname])
                )
            )
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&quot;&lt;ul&gt;&quot;</span> <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;&quot;</span><span style="color: #666666">.</span>join(parts) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;&lt;/ul&gt;&quot;</span>
</code></pre>
</details>
<h3 id="_flatten_nav_tree">_flatten_nav_tree(tree: Dict[str, Any]) -&gt; Iterable[Tuple[str, str]]</h3>
<p>The function `_flatten_nav_tree` recursively traverses a nested dictionary structure representing a navigation tree and yields tuples of (name, link) for each file entry. It processes the `__files__` key to extract file name-link pairs and recursively iterates through subdirectories, skipping the `__files__` key during recursion. The function returns an iterable of tuples containing the names and links of all files in the tree structure.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_flatten_nav_tree</span>(tree: Dict[<span style="color: #008000">str</span>, Any]) <span style="color: #666666">-&gt;</span> Iterable[Tuple[<span style="color: #008000">str</span>, <span style="color: #008000">str</span>]]:
    <span style="color: #008000; font-weight: bold">for</span> name, link <span style="color: #AA22FF; font-weight: bold">in</span> tree<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;__files__&quot;</span>, []):
        <span style="color: #008000; font-weight: bold">yield</span> name, link
    <span style="color: #008000; font-weight: bold">for</span> dirname, sub <span style="color: #AA22FF; font-weight: bold">in</span> tree<span style="color: #666666">.</span>items():
        <span style="color: #008000; font-weight: bold">if</span> dirname <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;__files__&quot;</span>:
            <span style="color: #008000; font-weight: bold">continue</span>
        <span style="color: #008000; font-weight: bold">yield from</span> _flatten_nav_tree(sub)
</code></pre>
<h3 id="_highlight">_highlight(code: str, language: str) -&gt; str</h3>
<p>The function `_highlight` takes a string of code and a language identifier, then returns the code formatted with syntax highlighting using the Pygments library. It selects an appropriate lexer based on the language (supporting MATLAB, Python, C++, Java, or plain text), applies an HTML formatter to the highlighted code, and wraps the result in `&lt;pre&gt;&lt;code&gt;` tags for proper display.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_highlight</span>(code: <span style="color: #008000">str</span>, language: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return ``code`` highlighted for ``language`` using pygments.&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">if</span> language<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;matlab&quot;</span>:
        lexer <span style="color: #666666">=</span> MatlabLexer()
    <span style="color: #008000; font-weight: bold">elif</span> language<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;python&quot;</span>:
        lexer <span style="color: #666666">=</span> PythonLexer()
    <span style="color: #008000; font-weight: bold">elif</span> language<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;cpp&quot;</span>:
        lexer <span style="color: #666666">=</span> CppLexer()
    <span style="color: #008000; font-weight: bold">elif</span> language<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;java&quot;</span>:
        lexer <span style="color: #666666">=</span> JavaLexer()
    <span style="color: #008000; font-weight: bold">else</span>:
        lexer <span style="color: #666666">=</span> TextLexer()
    formatter <span style="color: #666666">=</span> HtmlFormatter(noclasses<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>, nowrap<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
    highlighted <span style="color: #666666">=</span> highlight(code, lexer, formatter)
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">f&quot;&lt;pre&gt;&lt;code&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>highlighted<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/code&gt;&lt;/pre&gt;&quot;</span>
</code></pre>
<h3 id="_render_html">_render_html(title: str, header: str, body: str, nav_html: str) -&gt; str</h3>
<p>The function `_render_html` generates an HTML document by formatting a template with provided content. It takes parameters for the page title, header, body content, and navigation HTML, then substitutes these into a template read from a file. The resulting HTML includes a comment indicating generation by DocGen-LM and specifies a static CSS file path. The function returns the complete HTML string with the generated content and formatting.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_render_html</span>(title: <span style="color: #008000">str</span>, header: <span style="color: #008000">str</span>, body: <span style="color: #008000">str</span>, nav_html: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
    template <span style="color: #666666">=</span> _TEMPLATE_PATH<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    content <span style="color: #666666">=</span> template<span style="color: #666666">.</span>format(
        title<span style="color: #666666">=</span>title,
        header<span style="color: #666666">=</span>header,
        body<span style="color: #666666">=</span>body,
        navigation<span style="color: #666666">=</span>nav_html,
        static_path<span style="color: #666666">=</span><span style="color: #BA2121">&quot;static/style.css&quot;</span>,
    )
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&quot;&lt;!-- Generated by DocGen-LM --&gt;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">+</span> content
</code></pre>
<h3 id="write_index">write_index(output_dir: str, project_summary: str, nav_tree: Dict[str, Any], module_summaries: Dict[str, str] | None=None) -&gt; None</h3>
<p>The function `write_index` generates an `index.html` file in the specified output directory. It takes a project summary, a navigation tree, and optional module summaries as inputs. The function creates the output directory if it does not exist, renders the navigation tree into HTML, and constructs a body containing the project summary, a horizontal rule, and a list of modules with links and optional summaries. The final HTML content is generated using a template rendering function and written to `index.html`.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">write_index</span>(
    output_dir: <span style="color: #008000">str</span>,
    project_summary: <span style="color: #008000">str</span>,
    nav_tree: Dict[<span style="color: #008000">str</span>, Any],
    module_summaries: Dict[<span style="color: #008000">str</span>, <span style="color: #008000">str</span>] <span style="color: #666666">|</span> <span style="color: #008000; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>,
) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Render ``index.html`` with *project_summary* and navigation links.&quot;&quot;&quot;</span>
    dest_dir <span style="color: #666666">=</span> Path(output_dir)
    dest_dir<span style="color: #666666">.</span>mkdir(parents<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>, exist_ok<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
    nav_html <span style="color: #666666">=</span> _render_nav_tree(nav_tree)
    body_parts <span style="color: #666666">=</span> [<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(project_summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>, <span style="color: #BA2121">&quot;&lt;hr/&gt;&quot;</span>, <span style="color: #BA2121">&quot;&lt;h2&gt;Modules&lt;/h2&gt;&quot;</span>]

    module_items: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> text, link <span style="color: #AA22FF; font-weight: bold">in</span> _flatten_nav_tree(nav_tree):
        summary <span style="color: #666666">=</span> (module_summaries <span style="color: #AA22FF; font-weight: bold">or</span> {})<span style="color: #666666">.</span>get(text, <span style="color: #BA2121">&quot;&quot;</span>)
        item <span style="color: #666666">=</span> (
            <span style="color: #BA2121">f&#39;&lt;li style=&quot;margin-bottom: 1em;&quot;&gt;&#39;</span>
            <span style="color: #BA2121">f&#39;&lt;a href=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>link<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(text)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/a&gt;&#39;</span>
        )
        <span style="color: #008000; font-weight: bold">if</span> summary:
            item <span style="color: #666666">+=</span> <span style="color: #BA2121">f&quot;&lt;br/&gt;&lt;small&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/small&gt;&quot;</span>
        item <span style="color: #666666">+=</span> <span style="color: #BA2121">&quot;&lt;/li&gt;&quot;</span>
        module_items<span style="color: #666666">.</span>append(item)

    <span style="color: #008000; font-weight: bold">if</span> module_items:
        body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&#39;&lt;ul style=&quot;list-style-type: none; padding-left: 0;&quot;&gt;&#39;</span>)
        body_parts<span style="color: #666666">.</span>extend(module_items)
        body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;/ul&gt;&quot;</span>)

    body <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span><span style="color: #666666">.</span>join(body_parts)
    html_out <span style="color: #666666">=</span> _render_html(
        <span style="color: #BA2121">&quot;Project Documentation&quot;</span>, <span style="color: #BA2121">&quot;Project Documentation&quot;</span>, body, nav_html
    )
    (dest_dir <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;index.html&quot;</span>)<span style="color: #666666">.</span>write_text(html_out, encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
</code></pre>
<h3 id="_render_function">_render_function(func: dict[str, Any], language: str, level: int=3, prefix: str=&#x27;&#x27;) -&gt; list[str]</h3>
<p>The function `_render_function` generates HTML content for a given function dictionary, including its signature, summary, and source code. It supports nested subfunctions by recursively rendering them within `&lt;details&gt;` and `&lt;summary&gt;` tags. The output is a list of HTML string parts representing the formatted function documentation. The rendering adjusts the heading level based on the provided `level` parameter and applies HTML escaping for safety. If the function contains subfunctions, each is rendered with its own collapsible section.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_render_function</span>(func: <span style="color: #008000">dict</span>[<span style="color: #008000">str</span>, Any], language: <span style="color: #008000">str</span>, level: <span style="color: #008000">int</span> <span style="color: #666666">=</span> <span style="color: #666666">3</span>, prefix: <span style="color: #008000">str</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;&quot;</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">list</span>[<span style="color: #008000">str</span>]:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return HTML parts for ``func`` and any nested subfunctions.&quot;&quot;&quot;</span>

    parts: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
    tag <span style="color: #666666">=</span> <span style="color: #BA2121">f&quot;h</span><span style="color: #A45A77; font-weight: bold">{</span><span style="color: #008000">min</span>(level,<span style="color: #bbbbbb"> </span><span style="color: #666666">6</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;</span>
    sig <span style="color: #666666">=</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;signature&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
    parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>prefix<span style="color: #A45A77; font-weight: bold">}{</span>html<span style="color: #666666">.</span>escape(sig)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&#39;</span>)

    summary <span style="color: #666666">=</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;summary&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;docstring&quot;</span>)
    <span style="color: #008000; font-weight: bold">if</span> summary:
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>)

    src <span style="color: #666666">=</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;source&quot;</span>)
    <span style="color: #008000; font-weight: bold">if</span> src:
        parts<span style="color: #666666">.</span>append(_highlight(src, language))

    <span style="color: #008000; font-weight: bold">for</span> sub <span style="color: #AA22FF; font-weight: bold">in</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;subfunctions&quot;</span>, []):
        sub_sig <span style="color: #666666">=</span> sub<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;signature&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> sub<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;details&gt;&quot;</span>)
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;summary&gt;Subfunction: </span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(sub_sig)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/summary&gt;&quot;</span>)
        parts<span style="color: #666666">.</span>extend(_render_function(sub, language, level <span style="color: #666666">+</span> <span style="color: #666666">1</span>))
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;/details&gt;&quot;</span>)

    <span style="color: #008000; font-weight: bold">return</span> parts
</code></pre>
<h3 id="_render_class">_render_class(cls: dict[str, Any], language: str, level: int=2) -&gt; list[str]</h3>
<p>The function `_render_class` generates HTML content for a class definition and its components, including variables, methods, and subclasses. It takes a dictionary representing the class, the programming language, and an optional nesting level for HTML headers. The output is a list of HTML strings that define the class structure with appropriate headings, documentation, variable details, method summaries, and nested subclass information wrapped in expandable `&lt;details&gt;` elements.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_render_class</span>(<span style="color: #008000">cls</span>: <span style="color: #008000">dict</span>[<span style="color: #008000">str</span>, Any], language: <span style="color: #008000">str</span>, level: <span style="color: #008000">int</span> <span style="color: #666666">=</span> <span style="color: #666666">2</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">list</span>[<span style="color: #008000">str</span>]:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return HTML parts for ``cls`` and any subclasses.&quot;&quot;&quot;</span>

    parts: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
    tag <span style="color: #666666">=</span> <span style="color: #BA2121">f&quot;h</span><span style="color: #A45A77; font-weight: bold">{</span><span style="color: #008000">min</span>(level,<span style="color: #bbbbbb"> </span><span style="color: #666666">6</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;</span>
    cls_name <span style="color: #666666">=</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
    parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>cls_name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;Class: </span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(cls_name)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&#39;</span>)
    doc <span style="color: #666666">=</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;docstring&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;summary&quot;</span>)
    <span style="color: #008000; font-weight: bold">if</span> doc:
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(doc)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>)

    variables <span style="color: #666666">=</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;variables&quot;</span>, [])
    <span style="color: #008000; font-weight: bold">if</span> variables:
        var_section_tag <span style="color: #666666">=</span> <span style="color: #BA2121">f&quot;h</span><span style="color: #A45A77; font-weight: bold">{</span><span style="color: #008000">min</span>(level<span style="color: #bbbbbb"> </span><span style="color: #666666">+</span><span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">6</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;</span>
        parts<span style="color: #666666">.</span>append(
            <span style="color: #BA2121">f&#39;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>var_section_tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>cls_name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">-variables&quot;&gt;Variables&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>var_section_tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&#39;</span>
        )
        <span style="color: #008000; font-weight: bold">for</span> var <span style="color: #AA22FF; font-weight: bold">in</span> variables:
            var_tag <span style="color: #666666">=</span> <span style="color: #BA2121">f&quot;h</span><span style="color: #A45A77; font-weight: bold">{</span><span style="color: #008000">min</span>(level<span style="color: #bbbbbb"> </span><span style="color: #666666">+</span><span style="color: #bbbbbb"> </span><span style="color: #666666">2</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">6</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;</span>
            name <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
            parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>var_tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(name)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>var_tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&#39;</span>)
            summary <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;summary&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;docstring&quot;</span>)
            <span style="color: #008000; font-weight: bold">if</span> summary:
                parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>)
            src <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;source&quot;</span>)
            <span style="color: #008000; font-weight: bold">if</span> src:
                parts<span style="color: #666666">.</span>append(_highlight(src, language))

    <span style="color: #008000; font-weight: bold">for</span> method <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;methods&quot;</span>, []):
        parts<span style="color: #666666">.</span>extend(_render_function(method, language, level <span style="color: #666666">+</span> <span style="color: #666666">1</span>, <span style="color: #BA2121">&quot;Method: &quot;</span>))

    <span style="color: #008000; font-weight: bold">for</span> sub <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;subclasses&quot;</span>, []):
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;details&gt;&quot;</span>)
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;summary&gt;Class: </span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(sub<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;name&#39;</span>,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&#39;&#39;</span>))<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/summary&gt;&quot;</span>)
        parts<span style="color: #666666">.</span>extend(_render_class(sub, language, level <span style="color: #666666">+</span> <span style="color: #666666">1</span>))
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;/details&gt;&quot;</span>)

    <span style="color: #008000; font-weight: bold">return</span> parts
</code></pre>
<h3 id="write_module_page">write_module_page(output_dir: str, module_data: dict[str, Any], nav_tree: Dict[str, Any]) -&gt; None</h3>
<p>The function `write_module_page` generates an HTML documentation page for a given module based on provided data and navigation structure. It creates the output directory if it does not exist, extracts module details such as name and language, and constructs the page body by rendering class, variable, and function information. The rendered content includes summaries, docstrings, and source code highlights, formatted according to the module&#x27;s language. A navigation tree is included in the output, and the final HTML is written to a file named after the module.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">write_module_page</span>(output_dir: <span style="color: #008000">str</span>, module_data: <span style="color: #008000">dict</span>[<span style="color: #008000">str</span>, Any], nav_tree: Dict[<span style="color: #008000">str</span>, Any]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Render a module documentation page using ``module_data``.&quot;&quot;&quot;</span>
    dest_dir <span style="color: #666666">=</span> Path(output_dir)
    dest_dir<span style="color: #666666">.</span>mkdir(parents<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>, exist_ok<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
    module_name <span style="color: #666666">=</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;module&quot;</span>)
    language <span style="color: #666666">=</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;language&quot;</span>, <span style="color: #BA2121">&quot;python&quot;</span>)
    nav_html <span style="color: #666666">=</span> _render_nav_tree(nav_tree, include_home<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)

    body_parts <span style="color: #666666">=</span> [<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;summary&#39;</span>,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&#39;&#39;</span>))<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>]

    <span style="color: #008000; font-weight: bold">for</span> <span style="color: #008000">cls</span> <span style="color: #AA22FF; font-weight: bold">in</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;classes&quot;</span>, []):
        body_parts<span style="color: #666666">.</span>extend(_render_class(<span style="color: #008000">cls</span>, language, <span style="color: #666666">2</span>))

    module_vars <span style="color: #666666">=</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;variables&quot;</span>, [])
    <span style="color: #008000; font-weight: bold">if</span> module_vars:
        body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&#39;&lt;h2 id=&quot;variables&quot;&gt;Variables&lt;/h2&gt;&#39;</span>)
        <span style="color: #008000; font-weight: bold">for</span> var <span style="color: #AA22FF; font-weight: bold">in</span> module_vars:
            var_name <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
            body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;h3 id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>var_name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(var_name)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/h3&gt;&#39;</span>)
            summary <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;summary&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;docstring&quot;</span>)
            <span style="color: #008000; font-weight: bold">if</span> summary:
                body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>)
            src <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;source&quot;</span>)
            <span style="color: #008000; font-weight: bold">if</span> src:
                body_parts<span style="color: #666666">.</span>append(_highlight(src, language))

    <span style="color: #008000; font-weight: bold">if</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;functions&quot;</span>):
        body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;h2&gt;Functions&lt;/h2&gt;&quot;</span>)
    <span style="color: #008000; font-weight: bold">for</span> func <span style="color: #AA22FF; font-weight: bold">in</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;functions&quot;</span>, []):
        body_parts<span style="color: #666666">.</span>extend(_render_function(func, language, <span style="color: #666666">3</span>))

    body <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span><span style="color: #666666">.</span>join(body_parts)
    html_out <span style="color: #666666">=</span> _render_html(
        html<span style="color: #666666">.</span>escape(module_name),
        html<span style="color: #666666">.</span>escape(module_name),
        body,
        nav_html,
    )
    (dest_dir <span style="color: #666666">/</span> <span style="color: #BA2121">f&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>module_name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">.html&quot;</span>)<span style="color: #666666">.</span>write_text(html_out, encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
