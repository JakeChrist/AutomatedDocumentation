<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>html_writer</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul>
        <li><a href="index.html"><strong>üè† Project Overview</strong></a></li>
<li><a href="cache.html">cache</a></li>
<li><a href="chunk_utils.html">chunk_utils</a></li>
<li><a href="docgenerator.html">docgenerator</a></li>
<li><a href="explaincode.html">explaincode</a></li>
<li><a href="gui_wrapper.html">gui_wrapper</a></li>
<li><a href="html_writer.html">html_writer</a></li>
<li><a href="llm_client.html">llm_client</a></li>
<li><a href="manual_utils.html">manual_utils</a></li>
<li><a href="parser_cpp.html">parser_cpp</a></li>
<li><a href="parser_java.html">parser_java</a></li>
<li><a href="parser_matlab.html">parser_matlab</a></li>
<li><a href="parser_python.html">parser_python</a></li>
<li><a href="reviewer.html">reviewer</a></li>
<li><a href="scanner.html">scanner</a></li>
<li><a href="setup.html">setup</a></li>
<li><a href="summarize_utils.html">summarize_utils</a></li>
<li><a href="test_cache.html">test_cache</a></li>
<li><a href="test_chunk_utils.html">test_chunk_utils</a></li>
<li><a href="test_docgenerator.html">test_docgenerator</a></li>
<li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li>
<li><a href="test_explaincode.html">test_explaincode</a></li>
<li><a href="test_html_writer.html">test_html_writer</a></li>
<li><a href="test_integration.html">test_integration</a></li>
<li><a href="test_llm_client.html">test_llm_client</a></li>
<li><a href="test_manual_utils.html">test_manual_utils</a></li>
<li><a href="test_parser_cpp.html">test_parser_cpp</a></li>
<li><a href="test_parser_java.html">test_parser_java</a></li>
<li><a href="test_parser_matlab.html">test_parser_matlab</a></li>
<li><a href="test_parser_python.html">test_parser_python</a></li>
<li><a href="test_reviewer.html">test_reviewer</a></li>
<li><a href="test_scanner.html">test_scanner</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>html_writer</h1>
        <p>This module provides HTML rendering utilities for DocGen-LM. It includes functions to highlight code snippets in various programming languages and to render documentation pages using simple template substitution. The module defines templates for index and module pages, which are populated with project summaries, page links, function descriptions, class definitions, and variable details. It uses Pygments for syntax highlighting and HTML for rendering the final output.</p>
<h2>Functions</h2>
<h3 id="_highlight">_highlight(code: str, language: str) -&gt; str</h3>
<p>The function `_highlight` takes a string `code` and a string `language` as input. It uses the Pygments library to highlight the code based on the specified language. The function supports Python, MATLAB, C++, and Java languages. If an unsupported language is provided, it defaults to using the `TextLexer`. The highlighted code is returned within HTML `&lt;pre&gt;` and `&lt;code&gt;` tags for proper formatting in web pages.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_highlight</span>(code: <span style="color: #008000">str</span>, language: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return ``code`` highlighted for ``language`` using pygments.&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">if</span> language<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;matlab&quot;</span>:
        lexer <span style="color: #666666">=</span> MatlabLexer()
    <span style="color: #008000; font-weight: bold">elif</span> language<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;python&quot;</span>:
        lexer <span style="color: #666666">=</span> PythonLexer()
    <span style="color: #008000; font-weight: bold">elif</span> language<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;cpp&quot;</span>:
        lexer <span style="color: #666666">=</span> CppLexer()
    <span style="color: #008000; font-weight: bold">elif</span> language<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;java&quot;</span>:
        lexer <span style="color: #666666">=</span> JavaLexer()
    <span style="color: #008000; font-weight: bold">else</span>:
        lexer <span style="color: #666666">=</span> TextLexer()
    formatter <span style="color: #666666">=</span> HtmlFormatter(noclasses<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>, nowrap<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
    highlighted <span style="color: #666666">=</span> highlight(code, lexer, formatter)
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">f&quot;&lt;pre&gt;&lt;code&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>highlighted<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/code&gt;&lt;/pre&gt;&quot;</span>
</code></pre>
<h3 id="_render_html">_render_html(title: str, header: str, body: str, nav_html: str) -&gt; str</h3>
<p>The function `_render_html` takes four parameters: `title`, `header`, `body`, and `nav_html`. It reads a template from a specified path, formats it with the provided parameters, and returns the formatted HTML string. The template includes placeholders for the title, header, body, navigation, and static path, which are replaced by the actual values passed to the function.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_render_html</span>(title: <span style="color: #008000">str</span>, header: <span style="color: #008000">str</span>, body: <span style="color: #008000">str</span>, nav_html: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
    template <span style="color: #666666">=</span> _TEMPLATE_PATH<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
    content <span style="color: #666666">=</span> template<span style="color: #666666">.</span>format(
        title<span style="color: #666666">=</span>title,
        header<span style="color: #666666">=</span>header,
        body<span style="color: #666666">=</span>body,
        navigation<span style="color: #666666">=</span>nav_html,
        static_path<span style="color: #666666">=</span><span style="color: #BA2121">&quot;static/style.css&quot;</span>,
    )
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&quot;&lt;!-- Generated by DocGen-LM --&gt;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">+</span> content
</code></pre>
<h3 id="write_index">write_index(output_dir: str, project_summary: str, page_links: Iterable[Tuple[str, str]], module_summaries: Dict[str, str] | None=None) -&gt; None</h3>
<p>The `write_index` function generates the content for an `index.html` file in a specified output directory. It takes three parameters: `output_dir`, `project_summary`, and `page_links`. Optionally, it can also take `module_summaries`.

- `output_dir`: The directory where the `index.html` file will be written.
- `project_summary`: A summary of the project that will be displayed on the page.
- `page_links`: An iterable of tuples containing text and link pairs for navigation.
- `module_summaries`: An optional dictionary mapping module names to summaries.

The function creates a directory if it doesn&#x27;t exist, constructs HTML content for the project summary and navigation links, and optionally includes summaries for modules. It then uses `_render_html` to generate the final HTML output and writes it to `index.html` in the specified output directory.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">write_index</span>(
    output_dir: <span style="color: #008000">str</span>,
    project_summary: <span style="color: #008000">str</span>,
    page_links: Iterable[Tuple[<span style="color: #008000">str</span>, <span style="color: #008000">str</span>]],
    module_summaries: Dict[<span style="color: #008000">str</span>, <span style="color: #008000">str</span>] <span style="color: #666666">|</span> <span style="color: #008000; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>,
) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Render ``index.html`` with *project_summary* and navigation links.&quot;&quot;&quot;</span>
    dest_dir <span style="color: #666666">=</span> Path(output_dir)
    dest_dir<span style="color: #666666">.</span>mkdir(parents<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>, exist_ok<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
    nav_html <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span><span style="color: #666666">.</span>join(
        <span style="color: #BA2121">f&#39;&lt;li&gt;&lt;a href=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>link<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(text)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/a&gt;&lt;/li&gt;&#39;</span>
        <span style="color: #008000; font-weight: bold">for</span> text, link <span style="color: #AA22FF; font-weight: bold">in</span> page_links
    )
    body_parts <span style="color: #666666">=</span> [<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(project_summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>, <span style="color: #BA2121">&quot;&lt;hr/&gt;&quot;</span>, <span style="color: #BA2121">&quot;&lt;h2&gt;Modules&lt;/h2&gt;&quot;</span>]

    module_items: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> text, link <span style="color: #AA22FF; font-weight: bold">in</span> page_links:
        summary <span style="color: #666666">=</span> (module_summaries <span style="color: #AA22FF; font-weight: bold">or</span> {})<span style="color: #666666">.</span>get(text, <span style="color: #BA2121">&quot;&quot;</span>)
        item <span style="color: #666666">=</span> (
            <span style="color: #BA2121">f&#39;&lt;li style=&quot;margin-bottom: 1em;&quot;&gt;&#39;</span>
            <span style="color: #BA2121">f&#39;&lt;a href=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>link<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(text)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/a&gt;&#39;</span>
        )
        <span style="color: #008000; font-weight: bold">if</span> summary:
            item <span style="color: #666666">+=</span> <span style="color: #BA2121">f&quot;&lt;br/&gt;&lt;small&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/small&gt;&quot;</span>
        item <span style="color: #666666">+=</span> <span style="color: #BA2121">&quot;&lt;/li&gt;&quot;</span>
        module_items<span style="color: #666666">.</span>append(item)

    <span style="color: #008000; font-weight: bold">if</span> module_items:
        body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&#39;&lt;ul style=&quot;list-style-type: none; padding-left: 0;&quot;&gt;&#39;</span>)
        body_parts<span style="color: #666666">.</span>extend(module_items)
        body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;/ul&gt;&quot;</span>)

    body <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span><span style="color: #666666">.</span>join(body_parts)
    html_out <span style="color: #666666">=</span> _render_html(
        <span style="color: #BA2121">&quot;Project Documentation&quot;</span>, <span style="color: #BA2121">&quot;Project Documentation&quot;</span>, body, nav_html
    )
    (dest_dir <span style="color: #666666">/</span> <span style="color: #BA2121">&quot;index.html&quot;</span>)<span style="color: #666666">.</span>write_text(html_out, encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
</code></pre>
<h3 id="_render_function">_render_function(func: dict[str, Any], language: str, level: int=3, prefix: str=&#x27;&#x27;) -&gt; list[str]</h3>
<p>This function `_render_function` is designed to generate HTML parts for a given function and its nested subfunctions. It takes three parameters: `func`, which is a dictionary containing information about the function; `language`, specifying the programming language of the code; and an optional `level` parameter, defaulting to 3, which controls the depth of the HTML headings used for rendering. The function returns a list of strings representing the HTML parts.

The function starts by creating an HTML heading tag based on the `level` parameter and appends it to the `parts` list along with the function&#x27;s signature or name, escaped to prevent HTML injection. It then checks if there is a summary or docstring for the function and appends it as a paragraph if available.

If the function has source code, it calls another function `_highlight` (not shown in the provided code) to highlight the source code according to the specified `language` and adds the highlighted code to the `parts` list.

The function then iterates over any nested subfunctions of the current function. For each subfunction, it creates a `&lt;details&gt;` HTML tag, which allows for collapsible sections. Inside this tag, it appends a summary of the subfunction and recursively calls `_render_function` to generate HTML parts for the subfunction itself, increasing the `level` by 1 to create nested headings.

Finally, the function returns the list of HTML parts generated for the function and its subfunctions.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_render_function</span>(func: <span style="color: #008000">dict</span>[<span style="color: #008000">str</span>, Any], language: <span style="color: #008000">str</span>, level: <span style="color: #008000">int</span> <span style="color: #666666">=</span> <span style="color: #666666">3</span>, prefix: <span style="color: #008000">str</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;&quot;</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">list</span>[<span style="color: #008000">str</span>]:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return HTML parts for ``func`` and any nested subfunctions.&quot;&quot;&quot;</span>

    parts: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
    tag <span style="color: #666666">=</span> <span style="color: #BA2121">f&quot;h</span><span style="color: #A45A77; font-weight: bold">{</span><span style="color: #008000">min</span>(level,<span style="color: #bbbbbb"> </span><span style="color: #666666">6</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;</span>
    sig <span style="color: #666666">=</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;signature&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
    parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>prefix<span style="color: #A45A77; font-weight: bold">}{</span>html<span style="color: #666666">.</span>escape(sig)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&#39;</span>)

    summary <span style="color: #666666">=</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;summary&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;docstring&quot;</span>)
    <span style="color: #008000; font-weight: bold">if</span> summary:
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>)

    src <span style="color: #666666">=</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;source&quot;</span>)
    <span style="color: #008000; font-weight: bold">if</span> src:
        parts<span style="color: #666666">.</span>append(_highlight(src, language))

    <span style="color: #008000; font-weight: bold">for</span> sub <span style="color: #AA22FF; font-weight: bold">in</span> func<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;subfunctions&quot;</span>, []):
        sub_sig <span style="color: #666666">=</span> sub<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;signature&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> sub<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;details&gt;&quot;</span>)
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;summary&gt;Subfunction: </span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(sub_sig)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/summary&gt;&quot;</span>)
        parts<span style="color: #666666">.</span>extend(_render_function(sub, language, level <span style="color: #666666">+</span> <span style="color: #666666">1</span>))
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;/details&gt;&quot;</span>)

    <span style="color: #008000; font-weight: bold">return</span> parts
</code></pre>
<h3 id="_render_class">_render_class(cls: dict[str, Any], language: str, level: int=2) -&gt; list[str]</h3>
<p>This function `_render_class` generates HTML parts for a class and its subclasses. It takes a dictionary representing the class, a programming language string, and an optional level parameter (default is 2). The function returns a list of HTML strings.

The function starts by creating an HTML heading tag (`&lt;hX&gt;`) for the class name, where `X` is determined by the minimum of the provided level and 6. It then adds a paragraph with the class&#x27;s docstring or summary if available.

Next, it processes any variables associated with the class, adding headings and descriptions as needed. For each variable, it includes its source code highlighted in the specified language using another function `_highlight`.

The function also iterates over methods within the class, rendering them using a helper function `_render_function`, which adds a prefix indicating that the item is a method.

Finally, for each subclass of the current class, it creates an expandable section (`&lt;details&gt;`) containing the subclass&#x27;s name and rendered HTML parts. This recursive structure allows for nested classes to be displayed as expandable sections within their parent class.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_render_class</span>(<span style="color: #008000">cls</span>: <span style="color: #008000">dict</span>[<span style="color: #008000">str</span>, Any], language: <span style="color: #008000">str</span>, level: <span style="color: #008000">int</span> <span style="color: #666666">=</span> <span style="color: #666666">2</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">list</span>[<span style="color: #008000">str</span>]:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return HTML parts for ``cls`` and any subclasses.&quot;&quot;&quot;</span>

    parts: <span style="color: #008000">list</span>[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
    tag <span style="color: #666666">=</span> <span style="color: #BA2121">f&quot;h</span><span style="color: #A45A77; font-weight: bold">{</span><span style="color: #008000">min</span>(level,<span style="color: #bbbbbb"> </span><span style="color: #666666">6</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;</span>
    cls_name <span style="color: #666666">=</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
    parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>cls_name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;Class: </span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(cls_name)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&#39;</span>)
    doc <span style="color: #666666">=</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;docstring&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;summary&quot;</span>)
    <span style="color: #008000; font-weight: bold">if</span> doc:
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(doc)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>)

    variables <span style="color: #666666">=</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;variables&quot;</span>, [])
    <span style="color: #008000; font-weight: bold">if</span> variables:
        var_section_tag <span style="color: #666666">=</span> <span style="color: #BA2121">f&quot;h</span><span style="color: #A45A77; font-weight: bold">{</span><span style="color: #008000">min</span>(level<span style="color: #bbbbbb"> </span><span style="color: #666666">+</span><span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">6</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;</span>
        parts<span style="color: #666666">.</span>append(
            <span style="color: #BA2121">f&#39;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>var_section_tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>cls_name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">-variables&quot;&gt;Variables&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>var_section_tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&#39;</span>
        )
        <span style="color: #008000; font-weight: bold">for</span> var <span style="color: #AA22FF; font-weight: bold">in</span> variables:
            var_tag <span style="color: #666666">=</span> <span style="color: #BA2121">f&quot;h</span><span style="color: #A45A77; font-weight: bold">{</span><span style="color: #008000">min</span>(level<span style="color: #bbbbbb"> </span><span style="color: #666666">+</span><span style="color: #bbbbbb"> </span><span style="color: #666666">2</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">6</span>)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;</span>
            name <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
            parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;</span><span style="color: #A45A77; font-weight: bold">{</span>var_tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(name)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/</span><span style="color: #A45A77; font-weight: bold">{</span>var_tag<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&gt;&#39;</span>)
            summary <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;summary&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;docstring&quot;</span>)
            <span style="color: #008000; font-weight: bold">if</span> summary:
                parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>)
            src <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;source&quot;</span>)
            <span style="color: #008000; font-weight: bold">if</span> src:
                parts<span style="color: #666666">.</span>append(_highlight(src, language))

    <span style="color: #008000; font-weight: bold">for</span> method <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;methods&quot;</span>, []):
        parts<span style="color: #666666">.</span>extend(_render_function(method, language, level <span style="color: #666666">+</span> <span style="color: #666666">1</span>, <span style="color: #BA2121">&quot;Method: &quot;</span>))

    <span style="color: #008000; font-weight: bold">for</span> sub <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">cls</span><span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;subclasses&quot;</span>, []):
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;details&gt;&quot;</span>)
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;summary&gt;Class: </span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(sub<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;name&#39;</span>,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&#39;&#39;</span>))<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/summary&gt;&quot;</span>)
        parts<span style="color: #666666">.</span>extend(_render_class(sub, language, level <span style="color: #666666">+</span> <span style="color: #666666">1</span>))
        parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;/details&gt;&quot;</span>)

    <span style="color: #008000; font-weight: bold">return</span> parts
</code></pre>
<h3 id="write_module_page">write_module_page(output_dir: str, module_data: dict[str, Any], page_links: Iterable[Tuple[str, str]]) -&gt; None</h3>
<p>This function `write_module_page` generates an HTML documentation page for a Python module. It takes three parameters: `output_dir`, which is the directory where the output HTML file will be saved; `module_data`, a dictionary containing information about the module such as its name, summary, variables, and functions; and `page_links`, an iterable of tuples representing links to other pages in the documentation.

The function first constructs the destination directory for the output file. It then extracts the module&#x27;s name and language from `module_data`. A navigation bar is created with a link to the project overview and any additional links provided in `page_links`.

The body of the HTML page is built by concatenating various parts, including the module summary, class documentation (if any), variable documentation, and function documentation. Each part is generated using helper functions `_render_class`, `_render_function`, and `_highlight`. The final HTML content is rendered using `_render_html` and written to a file in the specified output directory with the filename corresponding to the module&#x27;s name.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">write_module_page</span>(output_dir: <span style="color: #008000">str</span>, module_data: <span style="color: #008000">dict</span>[<span style="color: #008000">str</span>, Any], page_links: Iterable[Tuple[<span style="color: #008000">str</span>, <span style="color: #008000">str</span>]]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Render a module documentation page using ``module_data``.&quot;&quot;&quot;</span>
    dest_dir <span style="color: #666666">=</span> Path(output_dir)
    dest_dir<span style="color: #666666">.</span>mkdir(parents<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>, exist_ok<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
    module_name <span style="color: #666666">=</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;module&quot;</span>)
    language <span style="color: #666666">=</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;language&quot;</span>, <span style="color: #BA2121">&quot;python&quot;</span>)
    nav_items <span style="color: #666666">=</span> [
        <span style="color: #BA2121">&#39;&lt;li&gt;&lt;a href=&quot;index.html&quot;&gt;&lt;strong&gt;üè† Project Overview&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;&#39;</span>
    ]
    nav_items<span style="color: #666666">.</span>extend(
        <span style="color: #BA2121">f&#39;&lt;li&gt;&lt;a href=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>link<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(text)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/a&gt;&lt;/li&gt;&#39;</span>
        <span style="color: #008000; font-weight: bold">for</span> text, link <span style="color: #AA22FF; font-weight: bold">in</span> page_links
    )
    nav_html <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span><span style="color: #666666">.</span>join(nav_items)

    body_parts <span style="color: #666666">=</span> [<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;summary&#39;</span>,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&#39;&#39;</span>))<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>]

    <span style="color: #008000; font-weight: bold">for</span> <span style="color: #008000">cls</span> <span style="color: #AA22FF; font-weight: bold">in</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;classes&quot;</span>, []):
        body_parts<span style="color: #666666">.</span>extend(_render_class(<span style="color: #008000">cls</span>, language, <span style="color: #666666">2</span>))

    module_vars <span style="color: #666666">=</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;variables&quot;</span>, [])
    <span style="color: #008000; font-weight: bold">if</span> module_vars:
        body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&#39;&lt;h2 id=&quot;variables&quot;&gt;Variables&lt;/h2&gt;&#39;</span>)
        <span style="color: #008000; font-weight: bold">for</span> var <span style="color: #AA22FF; font-weight: bold">in</span> module_vars:
            var_name <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;name&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
            body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&#39;&lt;h3 id=&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>var_name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(var_name)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/h3&gt;&#39;</span>)
            summary <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;summary&quot;</span>) <span style="color: #AA22FF; font-weight: bold">or</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;docstring&quot;</span>)
            <span style="color: #008000; font-weight: bold">if</span> summary:
                body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">f&quot;&lt;p&gt;</span><span style="color: #A45A77; font-weight: bold">{</span>html<span style="color: #666666">.</span>escape(summary)<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&lt;/p&gt;&quot;</span>)
            src <span style="color: #666666">=</span> var<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;source&quot;</span>)
            <span style="color: #008000; font-weight: bold">if</span> src:
                body_parts<span style="color: #666666">.</span>append(_highlight(src, language))

    <span style="color: #008000; font-weight: bold">if</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;functions&quot;</span>):
        body_parts<span style="color: #666666">.</span>append(<span style="color: #BA2121">&quot;&lt;h2&gt;Functions&lt;/h2&gt;&quot;</span>)
    <span style="color: #008000; font-weight: bold">for</span> func <span style="color: #AA22FF; font-weight: bold">in</span> module_data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;functions&quot;</span>, []):
        body_parts<span style="color: #666666">.</span>extend(_render_function(func, language, <span style="color: #666666">3</span>))

    body <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span><span style="color: #666666">.</span>join(body_parts)
    html_out <span style="color: #666666">=</span> _render_html(
        html<span style="color: #666666">.</span>escape(module_name),
        html<span style="color: #666666">.</span>escape(module_name),
        body,
        nav_html,
    )
    (dest_dir <span style="color: #666666">/</span> <span style="color: #BA2121">f&quot;</span><span style="color: #A45A77; font-weight: bold">{</span>module_name<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">.html&quot;</span>)<span style="color: #666666">.</span>write_text(html_out, encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
