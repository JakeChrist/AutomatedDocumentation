<!-- Generated by DocGen-LM -->
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
    
<title>test_reviewer</title>
<link href="static/style.css" rel="stylesheet"/>
</head>
<body class="doc-body">
<button aria-label="Toggle navigation menu" class="sidebar-toggle" id="sidebar-toggle">Menu</button>
<div aria-label="Documentation navigation" class="sidebar" role="navigation">
<h2>Navigation</h2>
<ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><a href="cache.html">cache</a></li><li><a href="chunk_utils.html">chunk_utils</a></li><li><a href="docgenerator.html">docgenerator</a></li><li><a href="explaincode.html">explaincode</a></li><li><a href="gui_wrapper.html">gui_wrapper</a></li><li><a href="html_writer.html">html_writer</a></li><li><a href="llm_client.html">llm_client</a></li><li><a href="manual_utils.html">manual_utils</a></li><li><a href="parser_cpp.html">parser_cpp</a></li><li><a href="parser_java.html">parser_java</a></li><li><a href="parser_matlab.html">parser_matlab</a></li><li><a href="parser_python.html">parser_python</a></li><li><a href="retrofit_sidebar.html">retrofit_sidebar</a></li><li><a href="reviewer.html">reviewer</a></li><li><a href="sanitize_docs.html">sanitize_docs</a></li><li><a href="scanner.html">scanner</a></li><li><a href="setup.html">setup</a></li><li><a href="summarize_utils.html">summarize_utils</a></li><li><details><summary>tests</summary><ul><li><a href="test_cache.html">test_cache</a></li><li><a href="test_chunk_utils.html">test_chunk_utils</a></li><li><a href="test_docgenerator.html">test_docgenerator</a></li><li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li><li><a href="test_explaincode.html">test_explaincode</a></li><li><a href="test_html_writer.html">test_html_writer</a></li><li><a href="test_integration.html">test_integration</a></li><li><a href="test_llm_client.html">test_llm_client</a></li><li><a href="test_manual_utils.html">test_manual_utils</a></li><li><a href="test_parser_cpp.html">test_parser_cpp</a></li><li><a href="test_parser_java.html">test_parser_java</a></li><li><a href="test_parser_matlab.html">test_parser_matlab</a></li><li><a href="test_parser_python.html">test_parser_python</a></li><li><a href="test_resume_progress.html">test_resume_progress</a></li><li><a href="test_retrofit_sidebar.html">test_retrofit_sidebar</a></li><li><a href="test_reviewer.html">test_reviewer</a></li><li><a href="test_sanitize_docs.html">test_sanitize_docs</a></li><li><a href="test_scanner.html">test_scanner</a></li></ul></details></li></ul>
</div>
<main class="content" role="main">
        <div class="content-inner">
<h1>test_reviewer</h1>
<p>Module defines tests for detecting specific phrases and issues in documentation files. Tests check for assistant phrasing, contradictions, and hallucinations using a reviewer tool. The module includes functions to generate HTML module pages and run the reviewer on specified paths. It verifies detection of problematic text patterns and ensures autofix functionality removes assistant phrasing from generated HTML.</p>
<h2>Functions</h2>
<h3 id="_make_module">_make_module(tmp_path: Path, summary: str, methods=None) -&gt; Path</h3>
<p>The function `_make_module` creates a module documentation page at a specified temporary path. It constructs a data dictionary containing the module's name, summary, and empty lists for classes and functions. If methods are provided, it adds a class named "Foo" with those methods to the data. The function then writes the module page using `write_module_page`, which generates an HTML file based on the provided data and a predefined file structure. Finally, it returns the path to the generated HTML file for the module.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_make_module</span>(tmp_path: Path, summary: <span style="color: #008000">str</span>, methods<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>) <span style="color: #666666">-&gt;</span> Path:
    data <span style="color: #666666">=</span> {
        <span style="color: #BA2121">"name"</span>: <span style="color: #BA2121">"mod"</span>,
        <span style="color: #BA2121">"summary"</span>: summary,
        <span style="color: #BA2121">"classes"</span>: [],
        <span style="color: #BA2121">"functions"</span>: [],
    }
    <span style="color: #008000; font-weight: bold">if</span> methods <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000; font-weight: bold">None</span>:
        data[<span style="color: #BA2121">"classes"</span>] <span style="color: #666666">=</span> [
            {<span style="color: #BA2121">"name"</span>: <span style="color: #BA2121">"Foo"</span>, <span style="color: #BA2121">"docstring"</span>: <span style="color: #BA2121">""</span>, <span style="color: #BA2121">"summary"</span>: <span style="color: #BA2121">""</span>, <span style="color: #BA2121">"methods"</span>: methods}
        ]
    write_module_page(<span style="color: #008000">str</span>(tmp_path), data, {<span style="color: #BA2121">"__files__"</span>: [(<span style="color: #BA2121">"index"</span>, <span style="color: #BA2121">"index.html"</span>)]})
    <span style="color: #008000; font-weight: bold">return</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">"mod.html"</span>
</code></pre>
<h3 id="test_assistant_phrasing_detected">test_assistant_phrasing_detected(tmp_path: Path, capsys) -&gt; None</h3>
<p>The function `test_assistant_phrasing_detected` tests whether the documentation generator detects assistant phrasing in the output. It creates a temporary Python module with a specific comment, runs the main documentation generation process on the module, captures the output, and asserts that the output contains both "[ASSISTANT]" and "mod.html". This verifies that the tool correctly identifies and processes assistant-generated text during documentation creation.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_assistant_phrasing_detected</span>(tmp_path: Path, capsys) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    _make_module(tmp_path, <span style="color: #BA2121">"You can use this class."</span>)
    main([<span style="color: #008000">str</span>(tmp_path)])
    out <span style="color: #666666">=</span> capsys<span style="color: #666666">.</span>readouterr()<span style="color: #666666">.</span>out
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">"[ASSISTANT]"</span> <span style="color: #AA22FF; font-weight: bold">in</span> out
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">"mod.html"</span> <span style="color: #AA22FF; font-weight: bold">in</span> out
</code></pre>
<h3 id="test_contradiction_detected">test_contradiction_detected(tmp_path: Path, capsys) -&gt; None</h3>
<p>The function `test_contradiction_detected` tests for the detection of a contradiction in documentation generation. It creates a module with a method named "bar" using `_make_module`, then invokes the `main` function with the path to the created module. After execution, it captures the output using `capsys.readouterr().out` and asserts that the string "[CONTRADICTION]" is present in the output, indicating that a contradiction was detected during the documentation generation process.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_contradiction_detected</span>(tmp_path: Path, capsys) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    methods <span style="color: #666666">=</span> [{<span style="color: #BA2121">"name"</span>: <span style="color: #BA2121">"bar"</span>, <span style="color: #BA2121">"signature"</span>: <span style="color: #BA2121">"def bar()"</span>, <span style="color: #BA2121">"docstring"</span>: <span style="color: #BA2121">""</span>, <span style="color: #BA2121">"source"</span>: <span style="color: #BA2121">""</span>}]
    _make_module(tmp_path, <span style="color: #BA2121">"No methods defined"</span>, methods)
    main([<span style="color: #008000">str</span>(tmp_path)])
    out <span style="color: #666666">=</span> capsys<span style="color: #666666">.</span>readouterr()<span style="color: #666666">.</span>out
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">"[CONTRADICTION]"</span> <span style="color: #AA22FF; font-weight: bold">in</span> out
</code></pre>
<h3 id="test_hallucination_detected">test_hallucination_detected(tmp_path: Path, capsys) -&gt; None</h3>
<p>The function `test_hallucination_detected` tests for the detection of hallucinations during documentation generation. It creates a temporary module with a specific description, runs the main documentation generation process on it, captures the output, and asserts that the string "[HALLUCINATION]" appears in the output. This indicates that the system correctly identifies potential hallucinations in the generated documentation.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_hallucination_detected</span>(tmp_path: Path, capsys) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    _make_module(tmp_path, <span style="color: #BA2121">"Implements tic-tac-toe features"</span>)
    main([<span style="color: #008000">str</span>(tmp_path)])
    out <span style="color: #666666">=</span> capsys<span style="color: #666666">.</span>readouterr()<span style="color: #666666">.</span>out
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">"[HALLUCINATION]"</span> <span style="color: #AA22FF; font-weight: bold">in</span> out
</code></pre>
<h3 id="test_autofix_removes_phrasing">test_autofix_removes_phrasing(tmp_path: Path) -&gt; None</h3>
<p>The function `test_autofix_removes_phrasing` tests the removal of phrasing by the autofix feature. It creates an HTML documentation file containing the text "You can call this." using a helper function `_make_module`, then runs the main documentation generation process with the `--autofix` flag. After processing, it reads the generated HTML content and asserts that the phrase "You can" has been removed from the output.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_autofix_removes_phrasing</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    html_path <span style="color: #666666">=</span> _make_module(tmp_path, <span style="color: #BA2121">"You can call this."</span>)
    main([<span style="color: #008000">str</span>(tmp_path), <span style="color: #BA2121">"--autofix"</span>])
    html <span style="color: #666666">=</span> html_path<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">"utf-8"</span>)
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #BA2121">"You can"</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #AA22FF; font-weight: bold">in</span> html
</code></pre>
</div>
    </main>
<script src="static/toggle.js"></script>
</body>
</html>
