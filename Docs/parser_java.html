<!-- Generated by DocGen-LM -->
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>parser_java</title>
<link href="static/style.css" rel="stylesheet"/>
</head>
<body><a class="skip-link" href="#main-content">Skip to main content</a><header class="topbar"><button aria-label="Toggle navigation menu" id="sidebar-toggle">Menu</button><span class="topbar-title">parser_java</span></header>
<nav aria-label="Documentation navigation" class="sidebar">
<h2>Navigation</h2>
<ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><a href="cache.html">cache</a></li><li><a href="chunk_utils.html">chunk_utils</a></li><li><a href="docgenerator.html">docgenerator</a></li><li><a href="explaincode.html">explaincode</a></li><li><a href="gui_wrapper.html">gui_wrapper</a></li><li><a href="html_writer.html">html_writer</a></li><li><a href="llm_client.html">llm_client</a></li><li><a href="manual_utils.html">manual_utils</a></li><li><a href="parser_cpp.html">parser_cpp</a></li><li><a href="parser_java.html">parser_java</a></li><li><a href="parser_matlab.html">parser_matlab</a></li><li><a href="parser_python.html">parser_python</a></li><li><a href="retrofit_sidebar.html">retrofit_sidebar</a></li><li><a href="reviewer.html">reviewer</a></li><li><a href="sanitize_docs.html">sanitize_docs</a></li><li><a href="scanner.html">scanner</a></li><li><a href="setup.html">setup</a></li><li><a href="summarize_utils.html">summarize_utils</a></li><li><details><summary>tests</summary><ul><li><a href="test_cache.html">test_cache</a></li><li><a href="test_chunk_utils.html">test_chunk_utils</a></li><li><a href="test_docgenerator.html">test_docgenerator</a></li><li><a href="test_docgenerator_subclasses.html">test_docgenerator_subclasses</a></li><li><a href="test_explaincode.html">test_explaincode</a></li><li><a href="test_html_writer.html">test_html_writer</a></li><li><a href="test_integration.html">test_integration</a></li><li><a href="test_llm_client.html">test_llm_client</a></li><li><a href="test_manual_utils.html">test_manual_utils</a></li><li><a href="test_parser_cpp.html">test_parser_cpp</a></li><li><a href="test_parser_java.html">test_parser_java</a></li><li><a href="test_parser_matlab.html">test_parser_matlab</a></li><li><a href="test_parser_python.html">test_parser_python</a></li><li><a href="test_resume_progress.html">test_resume_progress</a></li><li><a href="test_retrofit_sidebar.html">test_retrofit_sidebar</a></li><li><a href="test_reviewer.html">test_reviewer</a></li><li><a href="test_sanitize_docs.html">test_sanitize_docs</a></li><li><a href="test_scanner.html">test_scanner</a></li></ul></details></li></ul>
</nav>
<main class="content" id="main-content" role="main">
<h1>parser_java</h1>
<p>Module implements a Java file parser for DocGen-LM that extracts package information, class definitions, public methods, and variables. It uses line-based parsing to identify code elements and their associated documentation comments, including Javadoc and single-line comments. The parser processes source code to build structured data containing element names, signatures, documentation strings, and source code blocks. Functions handle comment extraction, block parsing, and class body analysis. Output format mirrors Python parsing structure with keys for module docstring, classes, and functions, though functions list remains empty for Java files.</p>
<h2>Functions</h2>
<h3 id="_get_preceding_comment">_get_preceding_comment(lines: List[str], idx: int) -&gt; str</h3>
<p>The function `_get_preceding_comment` extracts and returns comments that appear before a specified line index in a list of code lines. It processes both single-line comments (starting with `//`) and multi-line comments (enclosed in `/* */`). The function collects relevant comment lines, strips away comment delimiters, and joins them into a single string, preserving their order and formatting. It stops collecting when it encounters a non-comment line or an empty line, depending on the context of the comment block.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_get_preceding_comment</span>(lines: List[<span style="color: #008000">str</span>], idx: <span style="color: #008000">int</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
    comments: List[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
    j <span style="color: #666666">=</span> idx <span style="color: #666666">-</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">while</span> j <span style="color: #666666">&gt;=</span> <span style="color: #666666">0</span>:
        line <span style="color: #666666">=</span> lines[j]<span style="color: #666666">.</span>strip()
        <span style="color: #008000; font-weight: bold">if</span> line<span style="color: #666666">.</span>startswith(<span style="color: #BA2121">"//"</span>):
            comments<span style="color: #666666">.</span>insert(<span style="color: #666666">0</span>, line<span style="color: #666666">.</span>lstrip(<span style="color: #BA2121">"/ "</span>))
            j <span style="color: #666666">-=</span> <span style="color: #666666">1</span>
            <span style="color: #008000; font-weight: bold">continue</span>
        <span style="color: #008000; font-weight: bold">if</span> line<span style="color: #666666">.</span>endswith(<span style="color: #BA2121">"*/"</span>):
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">"/*"</span> <span style="color: #AA22FF; font-weight: bold">in</span> line:
                comments<span style="color: #666666">.</span>insert(<span style="color: #666666">0</span>, line<span style="color: #666666">.</span>strip()<span style="color: #666666">.</span>lstrip(<span style="color: #BA2121">"/* "</span>)<span style="color: #666666">.</span>rstrip(<span style="color: #BA2121">"*/ "</span>))
                <span style="color: #008000; font-weight: bold">break</span>
            block: List[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> []
            block<span style="color: #666666">.</span>insert(<span style="color: #666666">0</span>, line)
            j <span style="color: #666666">-=</span> <span style="color: #666666">1</span>
            <span style="color: #008000; font-weight: bold">while</span> j <span style="color: #666666">&gt;=</span> <span style="color: #666666">0</span> <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #BA2121">"/*"</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #AA22FF; font-weight: bold">in</span> lines[j]:
                block<span style="color: #666666">.</span>insert(<span style="color: #666666">0</span>, lines[j])
                j <span style="color: #666666">-=</span> <span style="color: #666666">1</span>
            <span style="color: #008000; font-weight: bold">if</span> j <span style="color: #666666">&gt;=</span> <span style="color: #666666">0</span>:
                block<span style="color: #666666">.</span>insert(<span style="color: #666666">0</span>, lines[j])
            cleaned <span style="color: #666666">=</span> [b<span style="color: #666666">.</span>strip()<span style="color: #666666">.</span>lstrip(<span style="color: #BA2121">"/* "</span>)<span style="color: #666666">.</span>rstrip(<span style="color: #BA2121">"*/ "</span>) <span style="color: #008000; font-weight: bold">for</span> b <span style="color: #AA22FF; font-weight: bold">in</span> block]
            comments <span style="color: #666666">=</span> cleaned <span style="color: #666666">+</span> comments
            <span style="color: #008000; font-weight: bold">break</span>
        <span style="color: #008000; font-weight: bold">if</span> line <span style="color: #666666">==</span> <span style="color: #BA2121">""</span>:
            <span style="color: #008000; font-weight: bold">if</span> comments:
                <span style="color: #008000; font-weight: bold">break</span>
            j <span style="color: #666666">-=</span> <span style="color: #666666">1</span>
            <span style="color: #008000; font-weight: bold">continue</span>
        <span style="color: #008000; font-weight: bold">break</span>
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">"</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">"</span><span style="color: #666666">.</span>join(c <span style="color: #008000; font-weight: bold">for</span> c <span style="color: #AA22FF; font-weight: bold">in</span> comments <span style="color: #008000; font-weight: bold">if</span> c)<span style="color: #666666">.</span>strip()
</code></pre>
<h3 id="_extract_block">_extract_block(lines: List[str], start: int) -&gt; Tuple[str, int]</h3>
<p>The function `_extract_block` extracts a contiguous block of code from a list of lines starting at a specified index. It takes the starting line and counts the difference between the number of opening and closing braces to determine when the block ends. The function returns the extracted block as a string along with the index of the last line processed.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_extract_block</span>(lines: List[<span style="color: #008000">str</span>], start: <span style="color: #008000">int</span>) <span style="color: #666666">-&gt;</span> Tuple[<span style="color: #008000">str</span>, <span style="color: #008000">int</span>]:
    text_lines <span style="color: #666666">=</span> [lines[start]]
    brace <span style="color: #666666">=</span> lines[start]<span style="color: #666666">.</span>count(<span style="color: #BA2121">"{"</span>) <span style="color: #666666">-</span> lines[start]<span style="color: #666666">.</span>count(<span style="color: #BA2121">"}"</span>)
    i <span style="color: #666666">=</span> start <span style="color: #666666">+</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">while</span> i <span style="color: #666666">&lt;</span> <span style="color: #008000">len</span>(lines) <span style="color: #AA22FF; font-weight: bold">and</span> brace <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span>:
        line <span style="color: #666666">=</span> lines[i]
        text_lines<span style="color: #666666">.</span>append(line)
        brace <span style="color: #666666">+=</span> line<span style="color: #666666">.</span>count(<span style="color: #BA2121">"{"</span>) <span style="color: #666666">-</span> line<span style="color: #666666">.</span>count(<span style="color: #BA2121">"}"</span>)
        i <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">"</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">"</span><span style="color: #666666">.</span>join(text_lines), i <span style="color: #666666">-</span> <span style="color: #666666">1</span>
</code></pre>
<h3 id="_parse_class_body">_parse_class_body(lines: List[str], start: int, end: int) -&gt; Tuple[List[Dict[str, Any]], List[Dict[str, Any]]]</h3>
<p>The function `_parse_class_body` extracts method and variable declarations from a specified range of lines within a class body. It processes each line to identify public methods and variables, capturing their names, signatures, types, docstrings, and source code. Methods are identified by lines starting with "public " followed by a function signature, while variables are identified by lines ending with ";" and containing a type declaration. The function returns two lists: one containing method dictionaries and another containing variable dictionaries, each with keys for name, signature/type, docstring, and source code.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_parse_class_body</span>(lines: List[<span style="color: #008000">str</span>], start: <span style="color: #008000">int</span>, end: <span style="color: #008000">int</span>) <span style="color: #666666">-&gt;</span> Tuple[List[Dict[<span style="color: #008000">str</span>, Any]], List[Dict[<span style="color: #008000">str</span>, Any]]]:
    methods: List[Dict[<span style="color: #008000">str</span>, Any]] <span style="color: #666666">=</span> []
    variables: List[Dict[<span style="color: #008000">str</span>, Any]] <span style="color: #666666">=</span> []
    i <span style="color: #666666">=</span> start
    <span style="color: #008000; font-weight: bold">while</span> i <span style="color: #666666">&lt;=</span> end:
        line <span style="color: #666666">=</span> lines[i]<span style="color: #666666">.</span>strip()
        <span style="color: #008000; font-weight: bold">if</span> line<span style="color: #666666">.</span>startswith(<span style="color: #BA2121">"public "</span>):
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">"("</span> <span style="color: #AA22FF; font-weight: bold">in</span> line <span style="color: #AA22FF; font-weight: bold">and</span> (line<span style="color: #666666">.</span>rstrip()<span style="color: #666666">.</span>endswith(<span style="color: #BA2121">"{"</span>) <span style="color: #AA22FF; font-weight: bold">or</span> line<span style="color: #666666">.</span>rstrip()<span style="color: #666666">.</span>endswith(<span style="color: #BA2121">"</span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121">"</span>)):
                <span style="color: #008000; font-weight: bold">if</span> line<span style="color: #666666">.</span>rstrip()<span style="color: #666666">.</span>endswith(<span style="color: #BA2121">"</span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121">"</span>):
                    sig <span style="color: #666666">=</span> line<span style="color: #666666">.</span>rstrip(<span style="color: #BA2121">"</span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121">"</span>)<span style="color: #666666">.</span>strip()
                    block <span style="color: #666666">=</span> line
                    end_idx <span style="color: #666666">=</span> i
                <span style="color: #008000; font-weight: bold">else</span>:
                    sig <span style="color: #666666">=</span> line<span style="color: #666666">.</span>rstrip(<span style="color: #BA2121">"{"</span>)<span style="color: #666666">.</span>strip()
                    block, end_idx <span style="color: #666666">=</span> _extract_block(lines, i)
                name <span style="color: #666666">=</span> sig<span style="color: #666666">.</span>split(<span style="color: #BA2121">"("</span>)[<span style="color: #666666">0</span>]<span style="color: #666666">.</span>split()[<span style="color: #666666">-1</span>]
                doc <span style="color: #666666">=</span> _get_preceding_comment(lines, i)
                methods<span style="color: #666666">.</span>append({<span style="color: #BA2121">"name"</span>: name, <span style="color: #BA2121">"signature"</span>: sig, <span style="color: #BA2121">"docstring"</span>: doc, <span style="color: #BA2121">"source"</span>: block})
                i <span style="color: #666666">=</span> end_idx <span style="color: #666666">+</span> <span style="color: #666666">1</span>
                <span style="color: #008000; font-weight: bold">continue</span>
            <span style="color: #008000; font-weight: bold">if</span> line<span style="color: #666666">.</span>endswith(<span style="color: #BA2121">";"</span>) <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #BA2121">"("</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #AA22FF; font-weight: bold">in</span> line:
                parts <span style="color: #666666">=</span> line<span style="color: #666666">.</span>rstrip(<span style="color: #BA2121">";"</span>)<span style="color: #666666">.</span>split()
                name <span style="color: #666666">=</span> parts[<span style="color: #666666">-1</span>]
                vartype <span style="color: #666666">=</span> <span style="color: #BA2121">" "</span><span style="color: #666666">.</span>join(parts[<span style="color: #666666">1</span>:<span style="color: #666666">-1</span>])
                doc <span style="color: #666666">=</span> _get_preceding_comment(lines, i)
                variables<span style="color: #666666">.</span>append({<span style="color: #BA2121">"name"</span>: name, <span style="color: #BA2121">"type"</span>: vartype, <span style="color: #BA2121">"docstring"</span>: doc, <span style="color: #BA2121">"source"</span>: lines[i]})
        i <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">return</span> methods, variables
</code></pre>
<h3 id="parse_java_file">parse_java_file(path: str) -&gt; Dict[str, Any]</h3>
<p>The function `parse_java_file` reads a Java source file and extracts structural information including the module-level docstring, package declaration, and class definitions. It identifies classes within the file, capturing their names, docstrings, methods, and variables. The function processes lines of the file to skip comments and empty lines at the beginning, determines the package statement if present, and parses each class definition by extracting its body and associated documentation. The result is a dictionary containing the module docstring, a list of classes with their details, and an empty list for functions, as Java parsing does not currently extract function-level information. The function utilizes helper functions `_get_preceding_comment`, `_extract_block`, and `_parse_class_body` to assist in parsing class structures and extracting relevant code blocks and documentation.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">parse_java_file</span>(path: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> Dict[<span style="color: #008000">str</span>, Any]:
    text <span style="color: #666666">=</span> Path(path)<span style="color: #666666">.</span>read_text(encoding<span style="color: #666666">=</span><span style="color: #BA2121">"utf-8"</span>)
    lines <span style="color: #666666">=</span> text<span style="color: #666666">.</span>splitlines()

    first_code <span style="color: #666666">=</span> <span style="color: #666666">0</span>
    <span style="color: #008000; font-weight: bold">while</span> first_code <span style="color: #666666">&lt;</span> <span style="color: #008000">len</span>(lines):
        stripped <span style="color: #666666">=</span> lines[first_code]<span style="color: #666666">.</span>strip()
        <span style="color: #008000; font-weight: bold">if</span> stripped <span style="color: #666666">==</span> <span style="color: #BA2121">""</span> <span style="color: #AA22FF; font-weight: bold">or</span> stripped<span style="color: #666666">.</span>startswith(<span style="color: #BA2121">"//"</span>) <span style="color: #AA22FF; font-weight: bold">or</span> stripped<span style="color: #666666">.</span>startswith(<span style="color: #BA2121">"/*"</span>):
            first_code <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
            <span style="color: #008000; font-weight: bold">continue</span>
        <span style="color: #008000; font-weight: bold">break</span>
    module_docstring <span style="color: #666666">=</span> _get_preceding_comment(lines, first_code)

    package <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
    classes: List[Dict[<span style="color: #008000">str</span>, Any]] <span style="color: #666666">=</span> []
    functions: List[Dict[<span style="color: #008000">str</span>, Any]] <span style="color: #666666">=</span> []

    i <span style="color: #666666">=</span> <span style="color: #666666">0</span>
    <span style="color: #008000; font-weight: bold">while</span> i <span style="color: #666666">&lt;</span> <span style="color: #008000">len</span>(lines):
        line <span style="color: #666666">=</span> lines[i]
        stripped <span style="color: #666666">=</span> line<span style="color: #666666">.</span>strip()
        <span style="color: #008000; font-weight: bold">if</span> package <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000; font-weight: bold">None</span> <span style="color: #AA22FF; font-weight: bold">and</span> stripped<span style="color: #666666">.</span>startswith(<span style="color: #BA2121">"package "</span>):
            package <span style="color: #666666">=</span> stripped<span style="color: #666666">.</span>split()[<span style="color: #666666">1</span>]<span style="color: #666666">.</span>rstrip(<span style="color: #BA2121">";"</span>)
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">"class "</span> <span style="color: #AA22FF; font-weight: bold">in</span> stripped <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #AA22FF; font-weight: bold">not</span> stripped<span style="color: #666666">.</span>startswith((<span style="color: #BA2121">"//"</span>, <span style="color: #BA2121">"/*"</span>, <span style="color: #BA2121">"*"</span>)):
            tokens <span style="color: #666666">=</span> stripped<span style="color: #666666">.</span>split()
            idx <span style="color: #666666">=</span> tokens<span style="color: #666666">.</span>index(<span style="color: #BA2121">"class"</span>)
            name <span style="color: #666666">=</span> tokens[idx <span style="color: #666666">+</span> <span style="color: #666666">1</span>]
            <span style="color: #008000; font-weight: bold">if</span> name<span style="color: #666666">.</span>endswith(<span style="color: #BA2121">"{"</span>):
                name <span style="color: #666666">=</span> name[:<span style="color: #666666">-1</span>]
            doc <span style="color: #666666">=</span> _get_preceding_comment(lines, i)
            block, end_idx <span style="color: #666666">=</span> _extract_block(lines, i)
            methods, variables <span style="color: #666666">=</span> _parse_class_body(lines, i <span style="color: #666666">+</span> <span style="color: #666666">1</span>, end_idx <span style="color: #666666">-</span> <span style="color: #666666">1</span>)
            classes<span style="color: #666666">.</span>append({<span style="color: #BA2121">"name"</span>: name, <span style="color: #BA2121">"docstring"</span>: doc, <span style="color: #BA2121">"methods"</span>: methods, <span style="color: #BA2121">"variables"</span>: variables, <span style="color: #BA2121">"source"</span>: block})
            i <span style="color: #666666">=</span> end_idx <span style="color: #666666">+</span> <span style="color: #666666">1</span>
            <span style="color: #008000; font-weight: bold">continue</span>
        i <span style="color: #666666">+=</span> <span style="color: #666666">1</span>

    result: Dict[<span style="color: #008000">str</span>, Any] <span style="color: #666666">=</span> {<span style="color: #BA2121">"module_docstring"</span>: module_docstring, <span style="color: #BA2121">"classes"</span>: classes, <span style="color: #BA2121">"functions"</span>: functions}
    <span style="color: #008000; font-weight: bold">if</span> package:
        result[<span style="color: #BA2121">"package"</span>] <span style="color: #666666">=</span> package
    <span style="color: #008000; font-weight: bold">return</span> result
</code></pre>
</main>
<footer aria-label="Page footer" class="page-footer"><p>Generated documentation</p></footer><script src="static/toggle.js"></script>
</body>
</html>
